var Fayde;!function(a){var b;!function(a){a.Version="0.17.1"}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){b.Library=a.TypeManager.resolveLibrary("lib://fayde.controls")}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Fayde;!function(a){var b;!function(b){var c;!function(c){var d=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.IsItemItsOwnContainer=function(a){return a instanceof b.MenuItem||a instanceof b.Separator},d.prototype.GetContainerForItem=function(){return new b.MenuItem},d.prototype.PrepareContainerForItem=function(e,f){c.prototype.PrepareContainerForItem.call(this,e,f);var g=e;if(g instanceof b.MenuItem&&(g.ParentMenuBase=this,g!=f)){var h=this.ItemTemplate,i=this.ItemContainerStyle;null!=h&&g.SetValue(a.Controls.ItemsControl.ItemTemplateProperty,h),null!=i&&d.HasDefaultValue(g,b.HeaderedItemsControl.ItemContainerStyleProperty)&&g.SetValue(b.HeaderedItemsControl.ItemContainerStyleProperty,i),d.HasDefaultValue(g,b.HeaderedItemsControl.HeaderProperty)&&(g.Header=f),null!=h&&g.SetValue(b.HeaderedItemsControl.HeaderTemplateProperty,h),null!=i&&g.SetValue(a.FrameworkElement.StyleProperty,i)}},d.HasDefaultValue=function(a,b){return a.ReadLocalValue(b)===DependencyProperty.UnsetValue},d.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return a.Style},d),d}(a.Controls.ItemsControl);c.MenuBase=d}(c=b.Primitives||(b.Primitives={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.call(this),this.Opened=new a.RoutedEvent,this.Closed=new a.RoutedEvent,this._Owner=null,this._PopupAlignmentPoint=new Point,this._SettingIsOpen=!1,this._Popup=null,this._Overlay=null,this.DefaultStyleKey=d,this.$RootVisualTracker=new b.contextmenu.RootVisualTracker(this)}return __extends(d,c),d.prototype.OnHorizontalOffsetChanged=function(){this.UpdateContextMenuPlacement()},d.prototype.OnVerticalOffsetChanged=function(){this.UpdateContextMenuPlacement()},d.prototype.OnIsOpenChanged=function(a){this._SettingIsOpen||(a.NewValue===!0?this.OpenPopup(this.$RootVisualTracker.mousePosition):this.ClosePopup())},d.prototype.OnKeyDown=function(a){switch(a.Key){case 8:this.ClosePopup(),a.Handled=!0;break;case 15:this.FocusNextItem(!1),a.Handled=!0;break;case 17:this.FocusNextItem(!0),a.Handled=!0}c.prototype.OnKeyDown.call(this,a)},d.prototype.OnMouseLeftButtonDown=function(a){a.Handled=!0,c.prototype.OnMouseLeftButtonDown.call(this,a)},d.prototype.OnMouseRightButtonDown=function(a){a.Handled=!0,c.prototype.OnMouseRightButtonDown.call(this,a)},Object.defineProperty(d.prototype,"Owner",{get:function(){return this._Owner},set:function(b){if(this._Owner){var c=this._Owner instanceof a.FrameworkElement?this._Owner:null;c&&c.MouseRightButtonDown.off(this._HandleOwnerMouseRightButtonDown,this)}this._Owner=b,this._Owner&&(c=this._Owner instanceof a.FrameworkElement?this._Owner:null,c&&c.MouseRightButtonDown.on(this._HandleOwnerMouseRightButtonDown,this))},enumerable:!0,configurable:!0}),d.prototype._HandleOwnerMouseRightButtonDown=function(a,b){this.OpenPopup(b.GetPosition(null)),b.Handled=!0},d.prototype._HandleOverlayMouseButtonDown=function(a,b){this.ClosePopup(),b.Handled=!0},d.prototype._HandleContextMenuSizeChanged=function(){this.UpdateContextMenuPlacement()},d.prototype.ChildMenuItemClicked=function(){this.ClosePopup()},d.prototype.UpdateContextMenuPlacement=function(){var a=this._PopupAlignmentPoint,c=this.$RootVisualTracker.getAvailableSize(),d=Math.max(0,Math.min(a.x+this.HorizontalOffset,c.width-this.ActualWidth)),e=Math.max(0,Math.min(a.y+this.VerticalOffset,c.height-this.ActualHeight));b.Canvas.SetLeft(this,d),b.Canvas.SetTop(this,e);var f=this._Overlay;f&&(f.Width=c.width,f.Height=c.height)},d.prototype.OpenPopup=function(c){var d=this;this._PopupAlignmentPoint=c;var e=new b.Canvas;e.Background=new a.Media.SolidColorBrush(Color.KnownColors.Transparent),this._Overlay=e,this._Overlay.MouseLeftButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.MouseRightButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.Children.Add(this);for(var f=this._Popup=new b.Primitives.Popup,g=this._Owner;g&&!(g instanceof a.UIElement);)g=g.Parent;if(g&&(f.XamlNode.RegisterInitiator(g),this.$RootVisualTracker.tryInit(g)),f.Child=this._Overlay,this.SizeChanged.on(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(function(){return d.UpdateContextMenuPlacement()}),this.UpdateContextMenuPlacement(),this.ReadLocalValue(a.DependencyObject.DataContextProperty)===DependencyProperty.UnsetValue){var h=new a.Data.Binding("DataContext");h.Source=this.Owner||this.$RootVisualTracker.rootVisual,this.SetBinding(a.DependencyObject.DataContextProperty,h)}f.IsOpen=!0,this.Focus(),this._SettingIsOpen=!0,this.IsOpen=!0,this._SettingIsOpen=!1,this.OnOpened(new a.RoutedEventArgs)},d.prototype.OnOpened=function(a){this.Opened.raise(this,a)},d.prototype.ClosePopup=function(){this._Popup&&(this._Popup.IsOpen=!1,this._Popup.Child=null,this._Popup=null),this._Overlay&&(this._Overlay.Children.Clear(),this._Overlay=null),this.SizeChanged.off(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(),this._SettingIsOpen=!0,this.IsOpen=!1,this._SettingIsOpen=!1,this.OnClosed(new a.RoutedEventArgs)},d.prototype.OnClosed=function(a){this.Closed.raise(this,a)},d.prototype.FocusNextItem=function(c){var d=this.Items.Count,e=c?-1:d,f=a.Surface.GetFocusedElement(this);f instanceof b.MenuItem&&this===f.ParentMenuBase&&(e=this.ItemContainersManager.IndexFromContainer(f));var g,h=e;do h=(h+d+(c?1:-1))%d,g=this.ItemContainersManager.ContainerFromIndex(h),g instanceof b.MenuItem||(g=null);while(!(g&&g.IsEnabled&&g.Focus()||h===e))},d.HorizontalOffsetProperty=DependencyProperty.Register("HorizontalOffset",function(){return Number},d,0),d.VerticalOffsetProperty=DependencyProperty.Register("VerticalOffset",function(){return Number},d,0),d.IsOpenProperty=DependencyProperty.Register("IsOpen",function(){return Boolean},d,!1),d}(b.Primitives.MenuBase);b.ContextMenu=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(){function c(){}return c.GetContextMenu=function(a){return a.GetValue(c.ContextMenuProperty)},c.SetContextMenu=function(a,b){a.SetValue(c.ContextMenuProperty,b)},c.OnContextMenuPropertyChanged=function(c,d){var e=c;if(e instanceof a.FrameworkElement){var f=d.OldValue;f instanceof b.ContextMenu&&(f.Owner=null);var g=d.NewValue;g instanceof b.ContextMenu&&(g.Owner=e)}},c.ContextMenuProperty=DependencyProperty.RegisterAttached("ContextMenu",function(){return b.ContextMenu},c,void 0,c.OnContextMenuPropertyChanged),c}();b.ContextMenuService=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){function c(b,c,d){return isNaN(b)?d:a.Localization.Format("{0:d"+c+"}",b)}var d=function(a){function d(){a.call(this),this._MonthTextBox=null,this._DayTextBox=null,this._YearTextBox=null,this._MonthGesture=new b.Internal.EventGesture,this._DayGesture=new b.Internal.EventGesture,this._YearGesture=new b.Internal.EventGesture,this._SelectionHandler=null,this.DefaultStyleKey=d}return __extends(d,a),d.prototype.OnSelectedMonthChanged=function(a){this.CoerceMonth(a.NewValue),this.CoerceDate()},d.prototype.OnSelectedDayChanged=function(a){this.CoerceDay(a.NewValue),this.CoerceDate()},d.prototype.OnSelectedYearChanged=function(a){this.CoerceYear(a.NewValue),this.CoerceDate()},d.prototype.OnSelectedDateChanged=function(a){var b=a.NewValue;b instanceof DateTime?(this.CoerceMonth(b.Month),this.CoerceDay(b.Day),this.CoerceYear(b.Year)):(this.CoerceMonth(0/0),this.CoerceDay(0/0),this.CoerceYear(0/0))},d.prototype.OnApplyTemplate=function(){var c=this;a.prototype.OnApplyTemplate.call(this),this._MonthGesture.Detach(),this._MonthTextBox=this.GetTemplateChild("MonthTextBox",b.TextBox),this._MonthTextBox&&this._MonthGesture.Attach(this._MonthTextBox.LostFocus,function(a){return c.CoerceMonth(a.Text)}),this._DayGesture.Detach(),this._DayTextBox=this.GetTemplateChild("DayTextBox",b.TextBox),this._DayTextBox&&this._DayGesture.Attach(this._DayTextBox.LostFocus,function(a){return c.CoerceDay(a.Text)}),this._YearGesture.Detach(),this._YearTextBox=this.GetTemplateChild("YearTextBox",b.TextBox),this._YearTextBox&&this._YearGesture.Attach(this._YearTextBox.LostFocus,function(a){return c.CoerceDay(a.Text)}),this._SelectionHandler&&this._SelectionHandler.Dispose(),this._SelectionHandler=new b.Internal.SelectionHandler([this._MonthTextBox,this._DayTextBox,this._YearTextBox]),this._UpdateText()},d.prototype.CoerceMonth=function(a){a=Math.max(1,Math.min(12,a)),isNaN(a)&&isNaN(this.SelectedMonth)||this.SetCurrentValue(d.SelectedMonthProperty,a),this._UpdateText()},d.prototype.CoerceDay=function(a){a=Math.max(1,Math.min(31,parseFloat(a))),isNaN(a)&&isNaN(this.SelectedDay)||this.SetCurrentValue(d.SelectedDayProperty,a),this._UpdateText()},d.prototype.CoerceYear=function(a){var b=DateTime.MaxValue.Year-1;a=Math.min(b,Math.max(0,a)),isNaN(a)&&isNaN(this.SelectedYear)||this.SetCurrentValue(d.SelectedYearProperty,a),this._UpdateText()},d.prototype.CoerceDate=function(){var a=this.SelectedMonth,b=this.SelectedDay,c=this.SelectedYear;if(!(isNaN(a)||isNaN(b)||isNaN(c))){var e=new DateTime(c,a,b);0!==DateTime.Compare(e,this.SelectedDate)&&this.SetCurrentValue(d.SelectedDateProperty,e)}},d.prototype._UpdateText=function(){this._MonthTextBox&&(this._MonthTextBox.Text=c(this.SelectedMonth,2,"MM")),this._DayTextBox&&(this._DayTextBox.Text=c(this.SelectedDay,2,"DD")),this._YearTextBox&&(this._YearTextBox.Text=c(this.SelectedYear,4,"YYYY"))},d.SelectedMonthProperty=DependencyProperty.Register("SelectedMonth",function(){return Number},d,0/0,function(a,b){return a.OnSelectedMonthChanged(b)}),d.SelectedDayProperty=DependencyProperty.Register("SelectedDay",function(){return Number},d,0/0,function(a,b){return a.OnSelectedDayChanged(b)}),d.SelectedYearProperty=DependencyProperty.Register("SelectedYear",function(){return Number},d,0/0,function(a,b){return a.OnSelectedYearChanged(b)}),d.SelectedDateProperty=DependencyProperty.Register("SelectedDate",function(){return DateTime},d,void 0,function(a,b){return a.OnSelectedDateChanged(b)}),d}(b.Control);b.DatePicker=d,b.TemplateParts(d,{Name:"MonthTextBox",Type:b.TextBox},{Name:"DayTextBox",Type:b.TextBox},{Name:"YearTextBox",Type:b.TextBox}),b.TemplateVisualStates(d,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=b.Primitives.ButtonBase,d=function(d){function e(){d.call(this),this.Spin=new a.RoutedEvent,this._IncreaseButton=null,this._DecreaseButton=null,this.DefaultStyleKey=e}return __extends(e,d),e.prototype.OnContentChanged=function(){},e.prototype.OnValidSpinDirectionChanged=function(){this.UpdateVisualState(!0),this.EnableButtons()},e.prototype.OnSpin=function(a){var b=0===a.Direction?1:2;if((this.ValidSpinDirection&b)!==b)throw new InvalidOperationException("Invalid Spin Direction");this.Spin.raise(this,a)},e.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this),this._IncreaseButton&&this._IncreaseButton.Click.off(this.OnIncreaseClick,this),this._IncreaseButton=this.GetTemplateChild("IncreaseButton",c),this._IncreaseButton&&this._IncreaseButton.Click.on(this.OnIncreaseClick,this),this._DecreaseButton&&this._DecreaseButton.Click.off(this.OnDecreaseClick,this),this._DecreaseButton=this.GetTemplateChild("DecreaseButton",c),this._DecreaseButton&&this._DecreaseButton.Click.on(this.OnDecreaseClick,this),this.UpdateVisualState(!1),this.EnableButtons()},e.prototype.OnIncreaseClick=function(){this.OnSpin(new b.SpinEventArgs(0))},e.prototype.OnDecreaseClick=function(){this.OnSpin(new b.SpinEventArgs(1))},e.prototype.EnableButtons=function(){this._IncreaseButton&&(this._IncreaseButton.IsEnabled=1===(1&this.ValidSpinDirection)),this._DecreaseButton&&(this._DecreaseButton.IsEnabled=2===(2&this.ValidSpinDirection))},e.prototype.GoToStates=function(a){d.prototype.GoToStates.call(this,a),this.GoToStateIncrease(a),this.GoToStateDecrease(a)},e.prototype.GoToStateCommon=function(a){return a(this.IsEnabled?this.IsMouseOver?"MouseOver":"Normal":"Disabled")},e.prototype.GoToStateIncrease=function(a){return a(1===(1&this.ValidSpinDirection)?"IncreaseEnabled":"IncreaseDisabled")},e.prototype.GoToStateDecrease=function(a){return a(2===(2&this.ValidSpinDirection)?"DecreaseEnabled":"DecreaseDisabled")},e.prototype.OnMouseEnter=function(a){d.prototype.OnMouseEnter.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseLeave=function(a){d.prototype.OnMouseLeave.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseLeftButtonDown=function(a){this.UpdateVisualState(),d.prototype.OnMouseLeftButtonDown.call(this,a)},e.prototype.OnMouseLeftButtonUp=function(a){d.prototype.OnMouseLeftButtonUp.call(this,a),this.UpdateVisualState()},e.prototype.OnGotFocus=function(a){d.prototype.OnGotFocus.call(this,a),this.UpdateVisualState()},e.prototype.OnLostFocus=function(a){d.prototype.OnLostFocus.call(this,a),this.UpdateVisualState()},e.ContentProperty=DependencyProperty.Register("Content",function(){return Object},e,void 0,function(a,b){return a.OnContentChanged(b.OldValue,b.NewValue)}),e.ValidSpinDirectionProperty=DependencyProperty.Register("ValidSpinDirection",function(){return new a.Enum(b.ValidSpinDirections)},e,1,function(a,b){return a.OnValidSpinDirectionChanged(b)}),e}(b.Control);b.Spinner=d,a.Markup.Content(d,d.ContentProperty),b.TemplateVisualStates(d,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"IncreaseStates",Name:"IncreaseEnabled"},{GroupName:"IncreaseStates",Name:"IncreaseDisabled"},{GroupName:"DecreaseStates",Name:"DecreaseEnabled"},{GroupName:"DecreaseStates",Name:"DecreaseDisabled"}),b.TemplateParts(d,{Name:"IncreaseButton",Type:b.Primitives.ButtonBase},{Name:"DecreaseButton",Type:b.Primitives.ButtonBase})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments),this._IgnoreValueChange=!1,this._TextBox=null,this._Spinner=null,this._Text="",this.ValueChanging=new a.RoutedPropertyChangingEvent,this.ValueChanged=new a.RoutedPropertyChangedEvent,this.Parsing=new a.RoutedEvent,this.ParseError=new a.RoutedEvent}return __extends(d,c),d.prototype.OnSpinnerStyleChanged=function(){},d.prototype._OnValueChanged=function(b){if(!this._IgnoreValueChange){var c=b.OldValue,d=b.NewValue,e=new a.RoutedPropertyChangingEventArgs(b.Property,c,d,!0);if(this.OnValueChanging(e),!e.InCoercion)if(e.Cancel)this._IgnoreValueChange=!0,this.Value=c,this._IgnoreValueChange=!1;else{var f=e.NewValue,g=new a.RoutedPropertyChangedEventArgs(c,f);this.OnValueChanged(g)}}},d.prototype.OnValueChanging=function(a){this.ValueChanging.raise(this,a)},d.prototype.OnValueChanged=function(a){this.ValueChanged.raise(this,a),this.SetTextBoxText()},d.prototype.OnIsEditableChanged=function(){this._TextBox||(this._TextBox.IsReadOnly=!this.IsEditable)},d.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this),this.SetTextBox(this.GetTemplateChild("Text")),this.SetSpinner(this.GetTemplateChild("Spinner")),this.SetTextBoxText(),null!=this._TextBox&&(this._TextBox.IsReadOnly=!this.IsEditable),this.UpdateVisualState(!1)},d.prototype.SetTextBox=function(a){this._TextBox&&(this._TextBox.GotFocus.off(this.TextBox_GotFocus,this),this._TextBox.LostFocus.off(this.TextBox_LostFocus,this)),this._TextBox=a instanceof b.TextBox?a:null,this._TextBox.GotFocus.on(this.TextBox_GotFocus,this),this._TextBox.LostFocus.on(this.TextBox_LostFocus,this),this._Text=this._TextBox.Text},d.prototype.SetSpinner=function(a){this._Spinner&&this._Spinner.Spin.off(this.Spinner_Spin,this),this._Spinner=a instanceof b.Spinner?a:null,this._Spinner&&this._Spinner.Spin.on(this.Spinner_Spin,this)},d.prototype.OnKeyDown=function(a){if(c.prototype.OnKeyDown.call(this,a),!a.Handled)switch(a.Key){case 3:this.ProcessUserInput(),a.Handled=!0;break;case 15:this.DoIncrement(),a.Handled=!0;break;case 17:this.DoDecrement(),a.Handled=!0}},d.prototype.OnMouseWheel=function(a){c.prototype.OnMouseWheel.call(this,a),a.Handled||(a.Delta<0?this.DoDecrement():0<a.Delta&&this.DoIncrement(),a.Handled=!0)},d.prototype.ApplyValue=function(a){var c,d=new b.UpDownParsingEventArgs(a),e=null;try{c=this.ParseValue(a),d.Value=c}catch(f){e=f}try{this.OnParsing(d)}catch(f){}if(null==e){{var g=d.Handled?d.Value:c;this.Value}this.Value===g&&this.SetTextBoxText(),this.Value=g}else if(d.Handled)this.Value===d.Value&&this.SetTextBoxText(),this.Value=d.Value;else{var h=new b.UpDownParseErrorEventArgs(a,e);this.OnParseError(h),h.Handled||this.SetTextBoxText()}},d.prototype.OnParseError=function(a){this.ParseError.raise(this,a)},d.prototype.OnParsing=function(a){this.Parsing.raise(this,a)},d.prototype.ParseValue=function(){},d.prototype.FormatValue=function(){return""},d.prototype.SelectAllText=function(){this._TextBox&&this._TextBox.SelectAll()},d.prototype.SetTextBoxText=function(){this._TextBox&&(this._Text=this.FormatValue()||"",this._TextBox.Text=this._Text,this._TextBox.SelectionStart=this._Text.length)},d.prototype.TextBox_LostFocus=function(){this.ProcessUserInput()},d.prototype.TextBox_GotFocus=function(){this.SelectAllText()},d.prototype.Spinner_Spin=function(a,b){this._TextBox&&this.ProcessUserInput(),this.OnSpin(b)},d.prototype.OnSpin=function(a){0===a.Direction?this.DoIncrement():this.DoDecrement()},d.prototype.ProcessUserInput=function(){if(this._TextBox&&this._Text!==this._TextBox.Text){var a=this._TextBox.SelectionStart;this._Text=this._TextBox.Text,this.ApplyValue(this._Text),a<this._TextBox.Text.length&&(this._TextBox.SelectionStart=a)}},d.prototype.DoDecrement=function(){this._Spinner&&2!==(2&this._Spinner.ValidSpinDirection)||this.OnDecrement()},d.prototype.OnDecrement=function(){},d.prototype.DoIncrement=function(){this._Spinner&&1!==(1&this._Spinner.ValidSpinDirection)||this.OnIncrement()},d.prototype.OnIncrement=function(){},d.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return a.Style},d,void 0,function(a,b){return a.OnSpinnerStyleChanged(b.OldValue,b.NewValue)}),d.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},d,!0,function(a,b){return a.OnIsEditableChanged(b)}),d}(b.Control);b.UpDownBase=c,b.TemplateVisualStates(c,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"}),b.TemplateParts(c,{Name:"Text",Type:b.TextBox},{Name:"Spinner",Type:b.Spinner})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){function c(a,b,c){switch(c){case 0:case 1:return!0;default:return!1}}function d(a,b,c){return a?c===(a.GetDynamicValue(b)||""):c===b.toString()}var e=function(e){function f(){var c=this;e.call(this),this.ValueChanging=new a.RoutedPropertyChangingEvent,this.ParseError=new a.RoutedEvent,this._ValueBindingEvaluator=null,this._CanEditByFocus=!1,this.DefaultStyleKey=f,Object.defineProperty(this,"Items",{value:new b.Internal.ObservableObjectCollection,writable:!1}),this.Items.CollectionChanged.on(this._OnItemsChanged,this),this._Coercer=new b.Internal.DomainCoercer(this,function(a){return c.SetCurrentValue(f.ValueProperty,a)},function(a){return c.SetCurrentValue(f.CurrentIndexProperty,a)})}return __extends(f,e),f.prototype.OnValueChanged=function(){},f.prototype.OnCurrentIndexChanged=function(){this.UpdateValidSpinDirection()},f.prototype._OnIsCyclicChanged=function(){this.UpdateValidSpinDirection()},f.prototype._OnItemsSourceChanged=function(b,c){var d=a.Collections.INotifyCollectionChanged_.as(b);if(d&&d.CollectionChanged.off(this._ItemsSourceModified,this),this.Items.IsReadOnly=!1,this.Items.Clear(),c){var e,f=nullstone.IEnumerable_.as(c);if(f){var g=f.getEnumerator();for(e=[];g.moveNext();)e.push(g.current)}else c instanceof Array&&(e=c);e&&(this.Items.AddRange(e),this.Items.IsReadOnly=!0),d=a.Collections.INotifyCollectionChanged_.as(c),d&&d.CollectionChanged.on(this._ItemsSourceModified,this)}},f.prototype._ItemsSourceModified=function(a,b){var c,d=a;switch(this.Items.IsReadOnly=!1,b.Action){case 1:c=b.NewStartingIndex;for(var e=nullstone.IEnumerator_.fromArray(b.NewItems);e.moveNext();)this.Items.Insert(c,e.current),c++;break;case 2:for(var e=nullstone.IEnumerator_.fromArray(b.OldItems);e.moveNext();)this.Items.RemoveAt(b.OldStartingIndex);break;case 3:c=b.NewStartingIndex;for(var e=nullstone.IEnumerator_.fromArray(b.NewItems);e.moveNext();)this.Items.SetValueAt(c,e.current),c++;break;case 4:this.Items.Clear(),this.Items.AddRange(d.ToArray())}this.Items.IsReadOnly=!0},f.prototype._OnItemsChanged=function(){this._Coercer.UpdateTextBoxText()},Object.defineProperty(f.prototype,"ValueMemberPath",{get:function(){var a=this.ValueMemberBinding;return a?a.Path.Path:null},set:function(b){var c=this.ValueMemberBinding;if(b)if(null!=c){var d=new a.Data.Binding(b);d.Converter=c.Converter,d.ConverterCulture=c.ConverterCulture,d.ConverterParameter=c.ConverterParameter,this.ValueMemberBinding=d}else this.ValueMemberBinding=new a.Data.Binding(b);else{if(!c)return;var d=new a.Data.Binding;d.Converter=c.Converter,d.ConverterCulture=c.ConverterCulture,d.ConverterParameter=c.ConverterParameter,this.ValueMemberBinding=d}},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"ValueMemberBinding",{get:function(){var a=this._ValueBindingEvaluator;return a?a.ValueBinding:null},set:function(a){this._ValueBindingEvaluator=new b.Internal.BindingSourceEvaluator(a)},enumerable:!0,configurable:!0}),f.prototype.OnApplyTemplate=function(){e.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new b.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",b.Spinner)),this._Coercer.Detach(),this._Coercer.Attach(this.GetTemplateChild("Text",b.TextBox)),this.UpdateValidSpinDirection(),this.UpdateVisualState()},f.prototype.OnGotFocus=function(a){e.prototype.OnGotFocus.call(this,a),this.UpdateVisualState(),this.IsEnabled&&this.TryEnterEditMode()},f.prototype.OnLostFocus=function(a){e.prototype.OnLostFocus.call(this,a),this.UpdateVisualState(),this.IsEnabled&&this._Coercer.EscapeFocus()},f.prototype.OnMouseEnter=function(a){e.prototype.OnMouseEnter.call(this,a),this.UpdateVisualState()},f.prototype.OnMouseLeave=function(a){e.prototype.OnMouseLeave.call(this,a),this.UpdateVisualState()},f.prototype.OnMouseLeftButtonDown=function(a){e.prototype.OnMouseLeftButtonDown.call(this,a),this.UpdateVisualState()},f.prototype.OnMouseLeftButtonUp=function(a){e.prototype.OnMouseLeftButtonUp.call(this,a),this.UpdateVisualState(),this.IsEnabled&&!this._Coercer.IsEditing&&(this.Focus(),this.TryEnterEditMode())},f.prototype.GoToStates=function(a){e.prototype.GoToStates.call(this,a),this.GoToStateEditing(a),this.GoToStateValid(a)},f.prototype.GoToStateEditing=function(a){return a(this._Coercer.IsEditing?"Edit":"Display")},f.prototype.GoToStateValid=function(a){return a(this._Coercer.IsInvalidInput?"InvalidDomain":"ValidDomain")},f.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var a=this.IsCyclic,b=this.CurrentIndex;this._SpinFlow.UpdateValid(a||b>0,a||b<this.Items.Count-1)}},f.prototype.TryEnterEditMode=function(){this._Coercer.IsEditing||!this._CanEditByFocus&&this.IsEditable&&(this._Coercer.IsEditing=!0)},f.prototype.OnIsEditingChanged=function(){this.UpdateVisualState()},f.prototype.OnIsInvalidInputChanged=function(){this.UpdateVisualState()},f.prototype.OnSpin=function(){this._Coercer.ProcessUserInput()},f.prototype.OnIncrement=function(){var a=this;this.CurrentIndex<this.Items.Count-1?this.CurrentIndex++:this.IsCyclic&&(this.CurrentIndex=0),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return a._CanEditByFocus=!1},1)},f.prototype.OnDecrement=function(){var a=this;this.CurrentIndex>0?this.CurrentIndex--:this.IsCyclic&&(this.CurrentIndex=this.Items.Count-1),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return a._CanEditByFocus=!1},1)},f.prototype.TryParseValue=function(a,b){if(!a)return b.Value=this.Value,!0;for(var c=this._ValueBindingEvaluator,e=this.Items.getEnumerator();e.moveNext()&&null==b.Value;)b.Value=d(c,e.current,a);if(null!=b.Value)return!0;if(b.Value=this.Value,1===this.InvalidInputAction)return!1;if(0===this.InvalidInputAction&&(b.Value=this.FallbackItem,null==b.Value||!this.Items.Contains(b.Value)))throw new ArgumentException("Cannot parse value.");return!0},f.prototype.FormatValue=function(){var a=this.Value;if(!a)return"";if(!this.Items.Contains(a))return"";try{var b=this._ValueBindingEvaluator;b&&(a=b.GetDynamicValue(a))}catch(c){}return"string"==typeof a?a:""},f.ValueProperty=DependencyProperty.Register("Value",function(){return Object},f,null,function(a,b){return a._Coercer.OnValueChanged(b.OldValue,b.NewValue)}),f.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},f,!1,function(a){return a._Coercer.UpdateIsEditable()}),f.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return a.Style},f),f.CurrentIndexProperty=DependencyProperty.Register("CurrentIndex",function(){return Number},f,-1,function(a,b){return a._Coercer.OnCurrentIndexChanged(b.OldValue,b.NewValue)}),f.IsCyclicProperty=DependencyProperty.Register("IsCyclic",function(){return Boolean},f,!1,function(a,b){return a._OnIsCyclicChanged(b)}),f.InvalidInputActionProperty=DependencyProperty.RegisterFull("InvalidInputAction",function(){return new a.Enum(b.InvalidInputAction)},f,0,void 0,void 0,!1,c,!0),f.FallbackItemProperty=DependencyProperty.Register("FallbackItem",function(){return Object},f,null),f.ItemsSourceProperty=DependencyProperty.Register("ItemsSource",function(){return nullstone.IEnumerable_},f,void 0,function(a,b){return a._OnItemsSourceChanged(b.OldValue,b.NewValue)}),f.ItemTemplateProperty=DependencyProperty.Register("ItemTemplate",function(){return a.DataTemplate},f),f}(b.Control);b.DomainUpDown=e,b.TemplateVisualStates(e,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"DomainStates",Name:"ValidDomain"},{GroupName:"DomainStates",Name:"InvalidDomain"})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){!function(a){a[a.None=0]="None",a[a.Increase=1]="Increase",a[a.Decrease=2]="Decrease"}(a.ValidSpinDirections||(a.ValidSpinDirections={}));var b=a.ValidSpinDirections;a.Library.addEnum(b,"ValidSpinDirections"),function(a){a[a.Increase=0]="Increase",a[a.Decrease=1]="Decrease"}(a.SpinDirection||(a.SpinDirection={}));var c=a.SpinDirection;a.Library.addEnum(c,"SpinDirection"),function(a){a[a.UseFallbackItem=0]="UseFallbackItem",a[a.TextBoxCannotLoseFocus=1]="TextBoxCannotLoseFocus"}(a.InvalidInputAction||(a.InvalidInputAction={}));var d=a.InvalidInputAction;a.Library.addEnum(d,"InvalidInputAction"),function(a){a[a.Left=0]="Left",a[a.Top=1]="Top",a[a.Right=2]="Right",a[a.Bottom=3]="Bottom"}(a.Dock||(a.Dock={}));var e=a.Dock;a.Library.addEnum(e,"Dock"),function(a){a[a.Long=0]="Long",a[a.Short=1]="Short"}(a.DatePickerFormat||(a.DatePickerFormat={}));var f=a.DatePickerFormat;a.Library.addEnum(f,"DatePickerFormat"),function(a){a[a.Regular=0]="Regular",a[a.Military=1]="Military"}(a.TimeDisplayMode||(a.TimeDisplayMode={}));var g=a.TimeDisplayMode;a.Library.addEnum(g,"TimeDisplayMode"),function(a){a[a.None=0]="None",a[a.ObjectErrors=1]="ObjectErrors",a[a.PropertyErrors=2]="PropertyErrors",a[a.All=a.PropertyErrors|a.ObjectErrors]="All"}(a.ValidationSummaryFilters||(a.ValidationSummaryFilters={}));var h=a.ValidationSummaryFilters;a.Library.addEnum(h,"ValidationSummaryFilters"),function(a){a[a.ObjectError=1]="ObjectError",a[a.PropertyError=2]="PropertyError"}(a.ValidationSummaryItemType||(a.ValidationSummaryItemType={}));var i=a.ValidationSummaryItemType;a.Library.addEnum(i,"ValidationSummaryItemType")}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=10,d=function(d){function e(){d.call(this),this._HorizontalTemplate=null,this._VerticalTemplate=null,this._DragStart=null,this._IsDragging=!1,this.DefaultStyleKey=e,this._Helper=new b.Internal.GridSplitterResizer(this),this.LayoutUpdated.on(this._OnLayoutUpdated,this)}return __extends(e,d),e.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this),this._HorizontalTemplate=this.GetTemplateChild("HorizontalTemplate",a.FrameworkElement),this._VerticalTemplate=this.GetTemplateChild("VerticalTemplate",a.FrameworkElement),this._Helper.UpdateResizeDirection(this),this._OnResizeDirectionChanged(),this.UpdateVisualState()},e.prototype._OnLayoutUpdated=function(){this._Helper&&this._Helper.UpdateResizeDirection(this)&&this._OnResizeDirectionChanged()},e.prototype._OnResizeDirectionChanged=function(){var a=1===this._Helper.Direction;this.Cursor=a?7:6;var b=this._HorizontalTemplate;b&&(b.Visibility=a?1:0);var c=this._VerticalTemplate;c&&(c.Visibility=a?0:1)},e.prototype.OnGotFocus=function(a){d.prototype.OnGotFocus.call(this,a),this.UpdateVisualState()},e.prototype.OnLostFocus=function(a){d.prototype.OnLostFocus.call(this,a),this.UpdateVisualState()},e.prototype.OnKeyDown=function(a){if(d.prototype.OnKeyDown.call(this,a),8===a.Key){if(!this._Helper)return;return this._Helper=null,void(a.Handled=!0)}if(this.IsFocused&&this.IsEnabled){var b=0,e=0;switch(a.Key){case 14:b=-c;break;case 15:e=-c;break;case 16:b=c;break;case 17:e=c}a.Handled=1===this.FlowDirection?this._HandleMove(-b,e,!0):this._HandleMove(b,e,!0)}},e.prototype.OnMouseLeftButtonDown=function(a){d.prototype.OnMouseLeftButtonDown.call(this,a),this.IsEnabled&&(this._IsDragging=this.CaptureMouse(),this._IsDragging&&(this._DragStart=this._GetTransformedPos(a),this.Focus(),this.InitHelper()))},e.prototype.OnMouseLeftButtonUp=function(a){d.prototype.OnMouseLeftButtonUp.call(this,a),this.ReleaseMouseCapture(),this._IsDragging=!1,this._Helper=null,this.UpdateVisualState()},e.prototype.OnMouseMove=function(a){if(d.prototype.OnMouseMove.call(this,a),this._IsDragging){var b=this._GetTransformedPos(a);b&&this._HandleMove(b.x-this._DragStart.x,b.y-this._DragStart.y,!1)}},e.prototype.InitHelper=function(){var a=this.VisualParent;a instanceof b.Grid&&(this._Helper=new b.Internal.GridSplitterResizer(this),this._Helper.Setup(this,a)||(this._Helper=null))},e.prototype._HandleMove=function(a,b,c){if(c){if(this._Helper)return!1;this.InitHelper()}return this._Helper?((!this._Helper.Move(this.VisualParent,a,b)||c)&&(this._Helper=null),!0):!1},e.prototype._GetTransformedPos=function(a){return this.RenderTransform?this.RenderTransform.Transform(a.GetPosition(this)):a.GetPosition(this)},e}(b.Control);b.GridSplitter=d}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;
!function(b){function c(a,b){return a.ReadLocalValue(b)===DependencyProperty.UnsetValue}var d=function(d){function e(){d.call(this),this._HeaderIsItem=!1,this.DefaultStyleKey=e,this._ItemsControlHelper=new b.Internal.ItemsControlHelper(this)}return __extends(e,d),e.prototype.OnHeaderChanged=function(){},e.prototype.OnHeaderTemplateChanged=function(){},e.prototype.OnItemContainerStyleChanged=function(a){this._ItemsControlHelper.UpdateItemContainerStyle(a.NewValue)},e.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this),this._ItemsControlHelper.OnApplyTemplate()},e.prototype.PrepareContainerForItem=function(c,f){var g=c;g instanceof b.Control||(g=null);var h=this.ItemContainerStyle;null!=h&&null!=g&&null==g.Style&&g.SetValue(a.FrameworkElement.StyleProperty,h);var i=c;i instanceof e&&e.PrepareHeaderedItemsControlContainer(i,f,this,h),d.prototype.PrepareContainerForItem.call(this,c,f)},e.PrepareHeaderedItemsControlContainer=function(d,f,g,h){if(d!==f){var i=g.ItemTemplate;null!=i&&d.SetValue(b.ItemsControl.ItemTemplateProperty,i),null!=h&&c(d,e.ItemContainerStyleProperty)&&d.SetValue(e.ItemContainerStyleProperty,h),(d._HeaderIsItem||c(d,e.HeaderProperty))&&(d.Header=f,d._HeaderIsItem=!0),null!=i&&d.SetValue(e.HeaderTemplateProperty,i),null!=h&&null==d.Style&&d.SetValue(a.FrameworkElement.StyleProperty,h);var j=i;if(j instanceof a.HierarchicalDataTemplate){var k=j.GetBindingExpression(a.HierarchicalDataTemplate.ItemsSourceProperty);if(k){var l=new a.Data.Binding(k.ParentBinding);l.Source=d.Header,d.SetBinding(b.ItemsControl.ItemsSourceProperty,l)}void 0!==j.ItemTemplate&&d.ItemTemplate===i&&(d.ClearValue(b.ItemsControl.ItemTemplateProperty),null!=j.ItemTemplate&&(d.ItemTemplate=j.ItemTemplate)),void 0!==j.ItemContainerStyle&&d.ItemContainerStyle===h&&(d.ClearValue(e.ItemContainerStyleProperty),null!=j.ItemContainerStyle&&(d.ItemContainerStyle=j.ItemContainerStyle))}}},e.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},e,void 0,function(a,b){return a.OnHeaderChanged(b.OldValue,b.NewValue)}),e.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return a.DataTemplate},e,void 0,function(a,b){return a.OnHeaderTemplateChanged(b.OldValue,b.NewValue)}),e.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return a.Style},e,void 0,function(a,b){return a.OnItemContainerStyleChanged(b)}),e}(b.ItemsControl);b.HeaderedItemsControl=d}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.call(this),this.Click=new a.RoutedEvent,this.DefaultStyleKey=d,this.UpdateIsEnabled()}return __extends(d,c),d.prototype.OnCommandChanged=function(b){var c=a.Input.ICommand_.as(b.OldValue);c&&c.CanExecuteChanged.off(this._CanExecuteChanged,this);var d=a.Input.ICommand_.as(b.NewValue);d&&d.CanExecuteChanged.on(this._CanExecuteChanged,this),this.UpdateIsEnabled()},d.prototype._CanExecuteChanged=function(){this.UpdateIsEnabled()},d.prototype.OnCommandParameterChanged=function(){this.UpdateIsEnabled()},d.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this),this.UpdateVisualState(!1)},d.prototype.UpdateIsEnabled=function(){this.IsEnabled=null==this.Command||this.Command.CanExecute(this.CommandParameter),this.UpdateVisualState(!0)},d.prototype.OnGotFocus=function(a){c.prototype.OnGotFocus.call(this,a),this.UpdateVisualState(!0)},d.prototype.OnLostFocus=function(a){c.prototype.OnLostFocus.call(this,a),this.UpdateVisualState(!0)},d.prototype.OnMouseEnter=function(a){c.prototype.OnMouseEnter.call(this,a),this.Focus(),this.UpdateVisualState(!0)},d.prototype.OnMouseLeave=function(a){c.prototype.OnMouseLeave.call(this,a),null!=this.ParentMenuBase&&this.ParentMenuBase.Focus(),this.UpdateVisualState(!0)},d.prototype.OnMouseLeftButtonDown=function(a){a.Handled||(this.OnClick(),a.Handled=!0),c.prototype.OnMouseLeftButtonDown.call(this,a)},d.prototype.OnMouseRightButtonDown=function(a){a.Handled||(this.OnClick(),a.Handled=!0),c.prototype.OnMouseRightButtonDown.call(this,a)},d.prototype.OnKeyDown=function(a){a.Handled||3!==a.Key||(this.OnClick(),a.Handled=!0),c.prototype.OnKeyDown.call(this,a)},d.prototype.OnClick=function(){var c=this.ParentMenuBase;c instanceof b.ContextMenu&&c.ChildMenuItemClicked(),this.Click.raise(this,new a.RoutedEventArgs),null!=this.Command&&this.Command.CanExecute(this.CommandParameter)&&this.Command.Execute(this.CommandParameter)},d.prototype.GoToStateCommon=function(a){return a(this.IsEnabled?"Normal":"Disabled")},d.CommandProperty=DependencyProperty.Register("Command",function(){return a.Input.ICommand_},d,void 0,function(a,b){return a.OnCommandChanged(b)}),d.CommandParameterProperty=DependencyProperty.Register("CommandParameter",function(){return Object},d,void 0,function(a,b){return a.OnCommandParameterChanged(b)}),d.IconProperty=DependencyProperty.Register("Icon",function(){return Object},d),d}(a.Controls.HeaderedItemsControl);b.MenuItem=c,b.TemplateVisualStates(c,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){var e=this;c.call(this),this.Parsing=new a.RoutedEvent,this.ParseError=new a.RoutedEvent,this.DefaultStyleKey=d,this._Coercer=new b.Internal.FormattedRangeCoercer(this,function(a){return e.SetCurrentValue(d.MaximumProperty,a)},function(a){return e.SetCurrentValue(d.ValueProperty,a)},function(){e._Formatter&&e._Formatter.UpdateTextBoxText()})}return __extends(d,c),d.prototype.OnMinimumChanged=function(){this.UpdateValidSpinDirection()},d.prototype.OnMaximumChanged=function(){this.UpdateValidSpinDirection()},d.prototype.OnValueChanged=function(){this.UpdateValidSpinDirection(),this._Formatter&&this._Formatter.UpdateTextBoxText()},d.prototype.OnIncrementChanged=function(){},d.prototype.OnDecimalPlacesChanged=function(){},d.prototype.OnApplyTemplate=function(){var a=this;c.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new b.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",b.Spinner)),this._Formatter&&this._Formatter.Dispose(),this._Formatter=new b.Internal.TextBoxFormatter(this,this.GetTemplateChild("Text",b.TextBox),function(b){return a.SetCurrentValue(d.ValueProperty,b)}),this.UpdateValidSpinDirection(),this.UpdateVisualState(!1)},d.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var a=this.Value;this._SpinFlow.UpdateValid(a<this.Maximum,a>this.Minimum)}},d.prototype.ParseValue=function(a){return parseFloat(a)},d.prototype.FormatValue=function(a){return a.toFixed(this.DecimalPlaces)},d.prototype.OnSpin=function(){this._Formatter.ProcessUserInput()},d.prototype.OnIncrement=function(){this._Coercer.AddToValue(this.Increment)},d.prototype.OnDecrement=function(){this._Coercer.AddToValue(-this.Increment)},d.MinimumProperty=DependencyProperty.Register("Minimum",function(){return Number},d,0,function(a,b){return a._Coercer.OnMinimumChanged(b.OldValue,b.NewValue)}),d.MaximumProperty=DependencyProperty.Register("Maximum",function(){return Number},d,100,function(a,b){return a._Coercer.OnMaximumChanged(b.OldValue,b.NewValue)}),d.ValueProperty=DependencyProperty.Register("Value",function(){return Number},d,0,function(a,b){return a._Coercer.OnValueChanged(b.OldValue,b.NewValue)}),d.IncrementProperty=DependencyProperty.Register("Increment",function(){return Number},d,1,function(a,b){return a.OnIncrementChanged(b.OldValue,b.NewValue)}),d.DecimalPlacesProperty=DependencyProperty.Register("DecimalPlaces",function(){return Number},d,0,function(a,b){return a._Coercer.OnDecimalPlacesChanged(b.OldValue,b.NewValue)}),d.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return a.Style},d),d.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},d,!0,function(a){return a._Formatter.UpdateIsEditable()}),d}(b.Control);b.NumericUpDown=c,b.TemplateVisualStates(c,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),b.TemplateParts(c,{Name:"Text",Type:b.TextBox},{Name:"Spinner",Type:b.Spinner})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b=function(a){function b(){a.call(this),this.DefaultStyleKey=b}return __extends(b,a),b}(a.Control);a.Separator=b}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(a){function b(b){a.call(this),Object.defineProperty(this,"Direction",{value:b,writable:!1})}return __extends(b,a),b}(a.RoutedEventArgs);b.SpinEventArgs=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.call(this),this.SelectionChanged=new a.RoutedEvent,this._UpdateIndex=!0,this._DesiredIndex=0,this.DefaultStyleKey=d}return __extends(d,c),d.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this),null!=this._ElementTabPanelTop&&this._ElementTabPanelTop.Children.Clear(),null!=this._ElementTabPanelBottom&&this._ElementTabPanelBottom.Children.Clear(),null!=this._ElementTabPanelLeft&&this._ElementTabPanelLeft.Children.Clear(),null!=this._ElementTabPanelRight&&this._ElementTabPanelRight.Children.Clear();var d=this._GetContentHost(this.TabStripPlacement);null!=d&&(d.Content=null),this._ElementTemplateTop=this.GetTemplateChild("TemplateTop",a.FrameworkElement),this._ElementTemplateBottom=this.GetTemplateChild("TemplateBottom",a.FrameworkElement),this._ElementTemplateLeft=this.GetTemplateChild("TemplateLeft",a.FrameworkElement),this._ElementTemplateRight=this.GetTemplateChild("TemplateRight",a.FrameworkElement),this._ElementTabPanelTop=this.GetTemplateChild("TabPanelTop",b.TabPanel),this._ElementTabPanelBottom=this.GetTemplateChild("TabPanelBottom",b.TabPanel),this._ElementTabPanelLeft=this.GetTemplateChild("TabPanelLeft",b.TabPanel),this._ElementTabPanelRight=this.GetTemplateChild("TabPanelRight",b.TabPanel),b.TabPanel.setTabAlignment(this._ElementTabPanelTop,1),b.TabPanel.setTabAlignment(this._ElementTabPanelBottom,3),b.TabPanel.setTabAlignment(this._ElementTabPanelLeft,0),b.TabPanel.setTabAlignment(this._ElementTabPanelRight,2),this._ElementContentTop=this.GetTemplateChild("ContentTop",b.ContentPresenter),this._ElementContentBottom=this.GetTemplateChild("ContentBottom",b.ContentPresenter),this._ElementContentLeft=this.GetTemplateChild("ContentLeft",b.ContentPresenter),this._ElementContentRight=this.GetTemplateChild("ContentRight",b.ContentPresenter);for(var e=this.Items.getEnumerator();e.moveNext();){var f=e.current;f instanceof b.TabItem||this._ThrowInvalidTabItem(f),this._AddToTabPanel(f)}this.SelectedIndex>=0&&this.UpdateSelectedContent(this.SelectedContent),this.UpdateTabPanelLayout(this.TabStripPlacement,this.TabStripPlacement),this.UpdateVisualState(!1)},d.prototype.OnSelectedItemChanged=function(a){var b=a.OldValue,c=a.NewValue,d=null==c?-1:this.Items.IndexOf(c);null!=c&&-1===d?this.SelectedItem=b:(this.SelectedIndex=d,this.SelectItem(b,c))},d.prototype.OnSelectedIndexChanged=function(a){var b=a.NewValue,c=a.OldValue;if(-1>b)throw new ArgumentException("'"+b.toString()+"' is not a valid value for property 'SelectedIndex'");if(this._UpdateIndex?this._DesiredIndex=b:this._UpdateIndex||(this._UpdateIndex=!0),b>=this.Items.Count)this._UpdateIndex=!1,this.SelectedIndex=c;else{var d;if(b>=0&&b<this.Items.Count&&(d=this.Items.GetValueAt(b)),this.SelectedItem===d)return;this.SelectedItem=d}},d.prototype.OnSelectedContentChanged=function(a){this.UpdateSelectedContent(a.NewValue)},d.prototype.OnTabStripPlacementPropertyChanged=function(a){this.UpdateTabPanelLayout(a.OldValue,a.NewValue);for(var b,c=this.Items.getEnumerator();c.moveNext();)b=c.current,null!=b&&b.UpdateVisualState()},d.prototype.OnItemsChanged=function(a){switch(c.prototype.OnItemsChanged.call(this,a),a.Action){case 1:for(var d=-1,e=a.NewItems.length,f=0;e>f;f++){var g=a.NewItems[f],h=g;h instanceof b.TabItem||this._ThrowInvalidTabItem(h);var i=this.Items.IndexOf(h);this._InsertIntoTabPanel(i,h),h.IsSelected?d=i:this.SelectedItem!==this._GetItemAtIndex(this.SelectedIndex)?d=this.Items.IndexOf(this.SelectedItem):this._DesiredIndex<this.Items.Count&&this._DesiredIndex>=0&&(d=this._DesiredIndex),h.UpdateVisualState()}if(-1===d){for(var j=this.Items.getEnumerator();j.moveNext();){var h=j.current;if(h instanceof b.TabItem||this._ThrowInvalidTabItem(h),h.IsSelected)return}if(this.Items.Count<=1){var k=this.Items.GetValueAt(0),l=k.ReadLocalValue(b.TabItem.IsSelectedProperty);l!==!1&&(d=0)}else d=0}this.SelectedItem=this._GetItemAtIndex(d),this.SelectedIndex=d;break;case 2:for(var h,e=a.OldItems.length,f=0;e>f;f++)h=a.OldItems[f],this._RemoveFromTabPanel(h),0===this.Items.Count?this.SelectedIndex=-1:this.Items.Count<=this.SelectedIndex?this.SelectedIndex=this.Items.Count-1:this.SelectedItem=this._GetItemAtIndex(this.SelectedIndex);break;case 4:this._ClearTabPanel(),this.SelectedIndex=-1;for(var h,j=this.Items.getEnumerator();j.moveNext();)h=j.current,h instanceof b.TabItem||this._ThrowInvalidTabItem(h),this._AddToTabPanel(h),h.IsSelected&&(this.SelectedItem=h);if(-1!==this.SelectedIndex||this.Items.Count<=0)break;this.SelectedIndex=0}},d.prototype.OnKeyDown=function(a){if(c.prototype.OnKeyDown.call(this,a),!a.Handled){var b;switch(a.Key){case 12:b=this._FindEndTabItem();break;case 13:b=this._FindHomeTabItem();break;default:return}null!=b&&b!==this.SelectedItem&&(a.Handled=!0,this.SelectedItem=b,b.Focus())}},d.prototype._FindEndTabItem=function(){for(var a=this.Items,b=a.Count,c=null,d=b-1;d>=0;d--)if(c=a.GetValueAt(d),c.IsEnabled&&0===c.Visibility)return c;return null},d.prototype._FindHomeTabItem=function(){for(var a=this.Items,b=a.Count,c=null,d=0;b>d;d++)if(c=a.GetValueAt(d),c.IsEnabled&&0===c.Visibility)return c;return null},d.prototype.SelectItem=function(a,c){if(null==c){var e=this._GetContentHost(this.TabStripPlacement);null!=e&&(e.Content=null),this.SetValue(d.SelectedContentProperty,null)}for(var f,g=this.Items.getEnumerator();g.moveNext();){var f=g.current;f instanceof b.TabItem||this._ThrowInvalidTabItem(f),f!==c&&f.IsSelected?f.IsSelected=!1:f===c&&(f.IsSelected=!0,this.SetValue(d.SelectedContentProperty,f.Content))}var h=[];null!=a&&h.push(a);var i=[];null!=c&&i.push(c);var j=new b.Primitives.SelectionChangedEventArgs(h,i);this.OnSelectionChanged(j),this.SelectionChanged.raise(this,j)},d.prototype.OnSelectionChanged=function(){},d.prototype.UpdateTabPanelLayout=function(a,c){var d=this._GetTemplate(a),e=this._GetTemplate(c),f=this._GetTabPanel(a),g=this._GetTabPanel(c),h=this._GetContentHost(a),i=this._GetContentHost(c);if(a!==c){if(null!=d&&(d.Visibility=1),null!=f&&f.Children.Clear(),null!=g)for(var j,k=this.Items.getEnumerator();k.moveNext();)j=k.current,j instanceof b.TabItem||this._ThrowInvalidTabItem(j),this._AddToTabPanel(j);null!=h&&(h.Content=null),null!=i&&(i.Content=this.SelectedContent)}null!=e&&(e.Visibility=0)},d.prototype.UpdateSelectedContent=function(a){var c=this.SelectedItem;if(c instanceof b.TabItem){var d=this._GetContentHost(this.TabStripPlacement);null!=d&&(d.HorizontalAlignment=c.HorizontalContentAlignment,d.VerticalAlignment=c.VerticalContentAlignment,d.ContentTemplate=c.ContentTemplate,d.Content=a)}},d.prototype.EnsureLanguageBinding=function(b){if(null!=b){var c=b.Content;if(c instanceof a.FrameworkElement&&c.ReadLocalValue(a.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue){var d=new a.Data.Binding("Language");d.Source=this,c.SetBinding(a.FrameworkElement.LanguageProperty,d)}}},d.prototype.ClearLanguageBinding=function(b){if(null!=b){var c=b.Content;c instanceof a.FrameworkElement&&c.ReadLocalValue(a.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue&&c.ClearValue(a.FrameworkElement.LanguageProperty)}},d.prototype._AddToTabPanel=function(a){var b=this._GetTabPanel(this.TabStripPlacement);b&&!b.Children.Contains(a)&&(b.Children.Add(a),this.EnsureLanguageBinding(a))},d.prototype._InsertIntoTabPanel=function(a,b){var c=this._GetTabPanel(this.TabStripPlacement);c&&!c.Children.Contains(b)&&c.Children.Insert(a,b)},d.prototype._RemoveFromTabPanel=function(a){var b=this._GetTabPanel(this.TabStripPlacement);b&&b.Children.Contains(a)&&b.Children.Remove(a)},d.prototype._ClearTabPanel=function(){var a=this._GetTabPanel(this.TabStripPlacement);if(a){for(var b=a.Children.getEnumerator();b.moveNext();){var c=b.current;null!=c&&this.ClearLanguageBinding(c)}a.Children.Clear()}},d.prototype._GetTabPanel=function(a){switch(a){case 0:return this._ElementTabPanelLeft;case 1:return this._ElementTabPanelTop;case 2:return this._ElementTabPanelRight;case 3:return this._ElementTabPanelBottom;default:return null}},d.prototype._GetTemplate=function(a){switch(a){case 0:return this._ElementTemplateLeft;case 1:return this._ElementTemplateTop;case 2:return this._ElementTemplateRight;case 3:return this._ElementTemplateBottom;default:return null}},d.prototype._GetContentHost=function(a){switch(a){case 0:return this._ElementContentLeft;case 1:return this._ElementContentTop;case 2:return this._ElementContentRight;case 3:return this._ElementContentBottom;default:return null}},d.prototype._GetItemAtIndex=function(a){if(0>a||a>=this.Items.Count)return null;var c=this.Items.GetValueAt(a);return c instanceof b.TabItem?c:void 0},d.prototype._ThrowInvalidTabItem=function(a){var b="object";try{b=a.constructor._TypeName}catch(c){}throw new ArgumentException("Unable to cast object of type '"+b+"' to type 'System.Windows.Controls.TabItem'.")},d.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},d,null,function(a,b){return a.OnSelectedItemChanged(b)}),d.SelectedIndexProperty=DependencyProperty.Register("SelectedIndex",function(){return Number},d,-1,function(a,b){return a.OnSelectedIndexChanged(b)}),d.SelectedContentProperty=DependencyProperty.Register("SelectedContent",function(){return Object},d,null,function(a,b){return a.OnSelectedContentChanged(b)}),d.TabStripPlacementProperty=DependencyProperty.Register("TabStripPlacement",function(){return new a.Enum(b.Dock)},d,1,function(a,b){return a.OnTabStripPlacementPropertyChanged(b)}),d}(b.ItemsControl);b.TabControl=c,b.TemplateVisualStates(c,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"}),b.TemplateParts(c,{Name:"TemplateLeft",Type:a.FrameworkElement},{Name:"ContentLeft",Type:b.ContentPresenter},{Name:"TabPanelLeft",Type:b.TabPanel},{Name:"TemplateTop",Type:a.FrameworkElement},{Name:"ContentTop",Type:b.ContentPresenter},{Name:"TabPanelTop",Type:b.TabPanel},{Name:"TemplateRight",Type:a.FrameworkElement},{Name:"ContentRight",Type:b.ContentPresenter},{Name:"TabPanelRight",Type:b.TabPanel},{Name:"TemplateBottom",Type:a.FrameworkElement},{Name:"ContentBottom",Type:b.ContentPresenter},{Name:"TabPanelBottom",Type:b.TabPanel})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function e(){c.call(this),this._SelectedElements=new d,this._UnselectedElements=new d,this._PreviousTemplate=null,this._PreviousHeader=null,this.DefaultStyleKey=e}return __extends(e,c),Object.defineProperty(e.prototype,"TabStripPlacement",{get:function(){var a=this.TabControlParent;return null!=a?a.TabStripPlacement:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"TabControlParent",{get:function(){return a.VisualTreeHelper.GetParentOfType(this,b.TabControl)},enumerable:!0,configurable:!0}),e.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this);var a=this._GetContentControl(this.IsSelected,this.TabStripPlacement);null!=a&&(a.Content=null),this._SelectedElements.OnApplyTemplate(this,!0),this._UnselectedElements.OnApplyTemplate(this,!1),this._UpdateHeaderVisuals(),this.UpdateVisualState(!1)},e.prototype._OnHeaderChanged=function(a){this.HasHeader=null!=a.NewValue,this.OnHeaderChanged(a.OldValue,a.NewValue)},e.prototype.OnHeaderChanged=function(){this._UpdateHeaderVisuals()},e.prototype.OnHeaderTemplateChanged=function(){this._UpdateHeaderVisuals()},e.prototype._OnIsSelectedChanged=function(b){var c=b.NewValue,d=new a.RoutedEventArgs;c?this.OnSelected(d):this.OnUnselected(d),this.IsTabStop=c,this.UpdateVisualState()},e.prototype.OnSelected=function(){var a=this.TabControlParent;a&&(a.SelectedItem=this)},e.prototype.OnUnselected=function(){var a=this.TabControlParent;a&&a.SelectedItem==this&&(a.SelectedIndex=-1)},e.prototype.UpdateVisualState=function(a){var b=this.GetTemplate(this.IsSelected,this.TabStripPlacement);null!=this._PreviousTemplate&&this._PreviousTemplate!==b&&(this._PreviousTemplate.Visibility=1),this._PreviousTemplate=b,null!=b&&(b.Visibility=0);var d=this._GetContentControl(this.IsSelected,this.TabStripPlacement);this._PreviousHeader&&this._PreviousHeader!==d&&(this._PreviousHeader.Content=null),this._PreviousHeader=d,this._UpdateHeaderVisuals(),c.prototype.UpdateVisualState.call(this,a)},e.prototype._UpdateHeaderVisuals=function(){var a=this._GetContentControl(this.IsSelected,this.TabStripPlacement);a&&(a.Content=this.Header,a.ContentTemplate=this.HeaderTemplate)},e.prototype.OnMouseLeave=function(){this.UpdateVisualState()},e.prototype.OnMouseEnter=function(){this.UpdateVisualState()},e.prototype.OnMouseLeftButtonDown=function(a){this.IsEnabled&&this.TabControlParent&&!this.IsSelected&&!a.Handled&&(this.IsTabStop=!0,a.Handled=this.Focus(),this.TabControlParent.SelectedIndex=this.TabControlParent.Items.IndexOf(this))},e.prototype.OnGotFocus=function(a){c.prototype.OnGotFocus.call(this,a),this.SetValueInternal(e.IsFocusedProperty,!0),this.UpdateVisualState()},e.prototype.OnLostFocus=function(a){c.prototype.OnLostFocus.call(this,a),this.SetValueInternal(e.IsFocusedProperty,!1),this.UpdateVisualState()},e.prototype.OnContentChanged=function(a,b){c.prototype.OnContentChanged.call(this,a,b);var d=this.TabControlParent;d&&this.IsSelected&&(d.SelectedContent=b)},e.prototype.OnKeyDown=function(b){if(c.prototype.OnKeyDown.call(this,b),!b.Handled){var d=this.TabControlParent,e=a.Input.InteractionHelper.GetLogicalKey(this.FlowDirection,b.Key),f=d.Items.IndexOf(this),g=null;switch(e){case 14:case 15:g=this._FindPreviousTabItem(f);break;case 16:case 17:g=this._FindNextTabItem(f);break;default:return}g&&g!==d.SelectedItem&&(b.Handled=!0,d.SelectedItem=g,g.Focus())}},e.prototype.GetTemplate=function(a,c){var d=a?this._SelectedElements:this._UnselectedElements;return d[b.Dock[c]].Template},e.prototype._GetContentControl=function(a,c){var d=a?this._SelectedElements:this._UnselectedElements;return d[b.Dock[c]].Header},e.prototype._FindPreviousTabItem=function(a){for(var b=a,c=this.TabControlParent.Items;b>=0;b--){var d=c.GetValueAt(b);if(d.IsEnabled&&0===d.Visibility)return d}return null},e.prototype._FindNextTabItem=function(a){for(var b=a,c=this.TabControlParent.Items,d=c.Count;d>b;b++){var e=c.GetValueAt(b);if(e.IsEnabled&&0===e.Visibility)return e}return null},e.HasHeaderProperty=DependencyProperty.Register("HasHeader",function(){return Boolean},e,!1),e.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},e,null,function(a,b){return a._OnHeaderChanged(b)}),e.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return a.DataTemplate},e,void 0,function(a,b){return a.OnHeaderTemplateChanged(b.OldValue,b.NewValue)}),e.IsFocusedProperty=DependencyProperty.Register("IsFocused",function(){return Boolean},e,!1),e.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},e,!1,function(a,b){return a._OnIsSelectedChanged(b)}),e}(b.ContentControl);b.TabItem=c,b.TemplateVisualStates(c,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"}),b.TemplateParts(c,{Name:"HeaderLeftSelected",Type:a.FrameworkElement},{Name:"HeaderTopSelected",Type:a.FrameworkElement},{Name:"HeaderRightSelected",Type:a.FrameworkElement},{Name:"HeaderBottomSelected",Type:a.FrameworkElement},{Name:"TemplateLeftSelected",Type:a.FrameworkElement},{Name:"TemplateTopSelected",Type:a.FrameworkElement},{Name:"TemplateRightSelected",Type:a.FrameworkElement},{Name:"TemplateBottomSelected",Type:a.FrameworkElement},{Name:"HeaderLeftUnselected",Type:a.FrameworkElement},{Name:"HeaderTopUnselected",Type:a.FrameworkElement},{Name:"HeaderRightUnselected",Type:a.FrameworkElement},{Name:"HeaderBottomUnselected",Type:a.FrameworkElement},{Name:"TemplateLeftUnselected",Type:a.FrameworkElement},{Name:"TemplateTopUnselected",Type:a.FrameworkElement},{Name:"TemplateRightUnselected",Type:a.FrameworkElement},{Name:"TemplateBottomUnselected",Type:a.FrameworkElement});var d=function(){function a(){this.Top=new e,this.Bottom=new e,this.Left=new e,this.Right=new e}return a.prototype.OnApplyTemplate=function(a,b){this.Top.OnApplyTemplate(a,b,"Top"),this.Bottom.OnApplyTemplate(a,b,"Bottom"),this.Left.OnApplyTemplate(a,b,"Left"),this.Right.OnApplyTemplate(a,b,"Right")},a}(),e=function(){function c(){this.Header=null,this.Template=null}return c.prototype.OnApplyTemplate=function(c,d,e){var f=e+(d?"Selected":"Unselected");this.Header=c.GetTemplateChild("Header"+f,b.ContentControl),this.Template=c.GetTemplateChild("Template"+f,a.FrameworkElement)},c}()}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){function c(b,c,d){return isNaN(b)?d:a.Localization.Format("{0:d"+c+"}",b)}var d=function(d){function e(){d.call(this),this._HourTextBox=null,this._MinuteTextBox=null,this._SecondTextBox=null,this._SecondSeparator=null,this._SuffixTextBlock=null,this._HourGesture=new b.Internal.EventGesture,this._MinuteGesture=new b.Internal.EventGesture,this._SecondGesture=new b.Internal.EventGesture,this._SuffixGesture=new b.Internal.EventGesture,this._SelectionHandler=null,this.DefaultStyleKey=e,this.CoerceTime()}return __extends(e,d),e.prototype.OnSelectedHourChanged=function(a){this.CoerceHour(a.NewValue),this.CoerceTime()},e.prototype.OnSelectedMinuteChanged=function(a){this.CoerceMinute(a.NewValue),this.CoerceTime()},e.prototype.OnSelectedSecondChanged=function(a){this.CoerceSecond(a.NewValue),this.CoerceTime()},e.prototype.OnSelectedTimeChanged=function(a){var b=a.NewValue;b instanceof TimeSpan?(this.CoerceHour(b.Hours),this.CoerceMinute(b.Minutes),this.CoerceSecond(b.Seconds)):(this.CoerceHour(0/0),this.CoerceMinute(0/0),this.CoerceSecond(0/0))},e.prototype.OnDisplayModeChanged=function(){this._UpdateText()},e.prototype.OnApplyTemplate=function(){var c=this;d.prototype.OnApplyTemplate.call(this),this._HourGesture.Detach(),this._HourTextBox=this.GetTemplateChild("HourTextBox",b.TextBox),this._HourTextBox&&this._HourGesture.Attach(this._HourTextBox.LostFocus,function(){return c.CoerceHour(c._GetHourInput())}),this._MinuteGesture.Detach(),this._MinuteTextBox=this.GetTemplateChild("MinuteTextBox",b.TextBox),this._MinuteTextBox&&this._MinuteGesture.Attach(this._MinuteTextBox.LostFocus,function(a){return c.CoerceMinute(a.Text)}),this._SecondGesture.Detach(),this._SecondTextBox=this.GetTemplateChild("SecondTextBox",b.TextBox),this._SecondTextBox&&this._SecondGesture.Attach(this._SecondTextBox.LostFocus,function(a){return c.CoerceSecond(a.Text)}),this._SecondSeparator=this.GetTemplateChild("SecondSeparator",a.FrameworkElement),this._SuffixGesture.Detach(),this._SuffixTextBlock=this.GetTemplateChild("SuffixTextBlock",b.TextBlock),this._SuffixTextBlock&&this._SuffixGesture.Attach(this._SuffixTextBlock.MouseLeftButtonUp,function(){return c.ToggleAmPm()}),this._SelectionHandler&&this._SelectionHandler.Dispose(),this._SelectionHandler=new b.Internal.SelectionHandler([this._HourTextBox,this._MinuteTextBox,this._SecondTextBox]),this._UpdateText()},e.prototype._GetHourInput=function(){var a=this._HourTextBox.Text;if(1===this.DisplayMode)return a;var b=parseFloat(a),c=!!this._SuffixTextBlock&&"AM"===this._SuffixTextBlock.Text;return c&&12===b?"00":!c&&12>b?(b+12).toString():a},e.prototype.CoerceHour=function(a){a=Math.max(0,Math.min(23,a)),a=a||0,this.SetCurrentValue(e.SelectedHourProperty,a),this._UpdateText()},e.prototype.CoerceMinute=function(a){a=Math.max(0,Math.min(59,a)),a=a||0,this.SetCurrentValue(e.SelectedMinuteProperty,a),this._UpdateText()},e.prototype.CoerceSecond=function(a){a=Math.max(0,Math.min(59,a)),a=a||0,this.SetCurrentValue(e.SelectedSecondProperty,a),this._UpdateText()},e.prototype.CoerceTime=function(){var a=new TimeSpan(this.SelectedHour,this.SelectedMinute,this.SelectedSecond),b=this.SelectedTime;b&&0===a.CompareTo(b)||this.SetCurrentValue(e.SelectedTimeProperty,a)},e.prototype.ToggleAmPm=function(){var a=this.SelectedHour;a>=12?a-=12:a+=12,this.CoerceHour(a)},e.prototype._UpdateText=function(){var a=1===this.DisplayMode,b=this.SelectedHour,d=this.SelectedMinute,e=this.SelectedSecond,f=this.IsSecondsShown,g=b;a||(g=g>=12?g-12:g,g=0===g?12:g),this._HourTextBox&&(this._HourTextBox.Text=c(g,2,"00")),this._MinuteTextBox&&(this._MinuteTextBox.Text=c(d,2,"00")),this._SecondTextBox&&(this._SecondTextBox.Text=c(e,2,"00"),this._SecondTextBox.Visibility=f?0:1),this._SecondSeparator&&(this._SecondSeparator.Visibility=f?0:1),this._SuffixTextBlock&&(this._SuffixTextBlock.Visibility=a?1:0,this._SuffixTextBlock.Text=b>=12?"PM":"AM")},e.SelectedHourProperty=DependencyProperty.Register("SelectedHour",function(){return Number},e,0,function(a,b){return a.OnSelectedHourChanged(b)}),e.SelectedMinuteProperty=DependencyProperty.Register("SelectedMinute",function(){return Number},e,0,function(a,b){return a.OnSelectedMinuteChanged(b)}),e.SelectedSecondProperty=DependencyProperty.Register("SelectedSecond",function(){return Number},e,0,function(a,b){return a.OnSelectedSecondChanged(b)}),e.SelectedTimeProperty=DependencyProperty.Register("SelectedTime",function(){return TimeSpan},e,void 0,function(a,b){return a.OnSelectedTimeChanged(b)}),e.IsSecondsShownProperty=DependencyProperty.Register("IsSecondsShown",function(){return Boolean},e,!0,function(a){return a._UpdateText()}),e.DisplayModeProperty=DependencyProperty.Register("DisplayMode",function(){return new a.Enum(b.TimeDisplayMode)},e,0,function(a,b){return a.OnDisplayModeChanged(b)}),e}(b.Control);b.TimePicker=d,b.TemplateParts(d,{Name:"HourTextBox",Type:b.TextBox},{Name:"MinuteTextBox",Type:b.TextBox},{Name:"SecondTextBox",Type:b.TextBox},{Name:"SecondSeparator",Type:a.FrameworkElement},{Name:"SuffixTextBlock",Type:b.TextBlock}),b.TemplateVisualStates(d,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=b.Internal.ScrollEx,d=function(d){function e(){d.call(this),this.SelectedItemChanged=new a.RoutedPropertyChangedEvent,this.DefaultStyleKey=e,this.ItemsControlHelper=new b.Internal.ItemsControlHelper(this)}return __extends(e,d),e.prototype.OnSelectedItemChanged=function(a){if(this._IgnorePropertyChange)this._IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this._IgnorePropertyChange=!0,this.SetValue(e.SelectedItemProperty,a.OldValue),new InvalidOperationException("Cannot set read-only property SelectedItem.");this.UpdateSelectedValue(a.NewValue)}},e.prototype.OnSelectedValueChanged=function(a){if(!this._IgnorePropertyChange){if(this._AllowWrite)return;
throw this._IgnorePropertyChange=!0,this.SetValue(e.SelectedValueProperty,a.OldValue),new InvalidOperationException("Cannot set read-only property SelectedValue.")}this._IgnorePropertyChange=!1},e.prototype.OnSelectedValuePathChanged=function(){this.UpdateSelectedValue(this.SelectedItem)},e.prototype.OnItemContainerStyleChanged=function(a){this.ItemsControlHelper.UpdateItemContainerStyle(a.NewValue)},e.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this),this.ItemsControlHelper.OnApplyTemplate(),this.UpdateVisualState(!1)},e.prototype.GetContainerForItem=function(){return new b.TreeViewItem},e.prototype.IsItemItsOwnContainer=function(a){return a instanceof b.TreeViewItem},e.prototype.PrepareContainerForItem=function(a,c){var e=a;e instanceof b.TreeViewItem&&(e.ParentItemsControl=this),b.Internal.ItemsControlHelper.PrepareContainerForItemOverride(a,this.ItemContainerStyle),b.HeaderedItemsControl.PrepareHeaderedItemsControlContainer(e,c,this,this.ItemContainerStyle),d.prototype.PrepareContainerForItem.call(this,a,c)},e.prototype.ClearContainerForItem=function(a,c){var e=a;e instanceof b.TreeViewItem&&(e.ParentItemsControl=null),d.prototype.ClearContainerForItem.call(this,a,c)},e.prototype.OnItemsChanged=function(a){if(!a)throw new ArgumentException("e");if(d.prototype.OnItemsChanged.call(this,a),null!=a.NewItems)for(var b=0,c=a.NewItems,e=c.length;e>b;b++)c[b].ParentItemsControl=this;switch(a.Action){case 2:case 4:null==this.SelectedItem||this.IsSelectedContainerHookedUp||this.SelectFirstItem();break;case 3:var f=this.SelectedItem;null==f||null!=a.OldItems&&!nullstone.equals(f,a.OldItems[0])||this.ChangeSelection(f,this.SelectedContainer,!1)}if(a.OldItems)for(var b=0,c=a.OldItems,e=c.length;e>b;b++)c[b].ParentItemsControl=null},e.prototype.CheckForSelectedDescendents=function(a){var b=[];for(b.push(a);b.length>0;){var c=b.pop();c.IsSelected&&(c.IgnorePropertyChange=!0,c.IsSelected=!1,this.ChangeSelection(c,c,!0),null==this.SelectedContainer.ParentItemsControl&&(this.SelectedContainer.RequiresContainsSelectionUpdate=!0));for(var d=c.Items.getEnumerator();d.moveNext();)b.push(d.current)}},e.prototype.PropagateKeyDown=function(a){this.OnKeyDown(a)},e.prototype.OnKeyDown=function(b){if(d.prototype.OnKeyDown.call(this,b),!b.Handled&&this.IsEnabled)if(a.Input.Keyboard.HasControl())switch(b.Key){case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:c.HandleKey(this.ItemsControlHelper.ScrollHost,b.Key,this.FlowDirection)&&(b.Handled=!0)}else switch(b.Key){case 10:case 11:if(null!=this.SelectedContainer){if(!this.HandleScrollByPage(10===b.Key))break;b.Handled=!0;break}if(!this.FocusFirstItem())break;b.Handled=!0;break;case 12:if(!this.FocusLastItem())break;b.Handled=!0;break;case 13:if(!this.FocusFirstItem())break;b.Handled=!0;break;case 15:case 17:if(null!=this.SelectedContainer||!this.FocusFirstItem())break;b.Handled=!0}},e.prototype.HandleScrollByPage=function(a){var d=this.ItemsControlHelper.ScrollHost;if(null!=d){var e=d.ViewportHeight,f={Value:0},g={Value:0};c.GetTopAndBottom(this.SelectedContainer.HeaderElement||this.SelectedContainer,d,f,g);var h=null,i=this.SelectedContainer,j=this.SelectedContainer.ParentItemsControl;if(null!=j){if(a)for(var k;j!==this;j=k){var l=j;if(null!=l){if(k=l.ParentItemsControl,!k)break;i=l}break}for(var m=j.ItemContainersManager.IndexFromContainer(i),n=j.Items.Count;null!=j&&null!=i;){if(i.IsEnabled){var o={Value:0};if(i.HandleScrollByPage(a,d,e,f.Value,g.Value,o))return!0;if(NumberEx.IsGreaterThanClose(o.Value,e)){if(h===this.SelectedContainer||null==h)return a?this.SelectedContainer.HandleUpKey():this.SelectedContainer.HandleDownKey();break}h=i}if(m+=a?-1:1,m>=0&&n>m)i=j.ItemContainersManager.ContainerFromIndex(m),i instanceof b.TreeViewItem||(i=null);else if(j===this)i=null;else for(;null!=j;){var l=j instanceof b.TreeViewItem?j:null;if(j=l.ParentItemsControl,null!=j){if(n=j.Items.Count,m=j.ItemContainersManager.IndexFromContainer(l)+(a?-1:1),m>-1&&n>m){i=j.ItemContainersManager.ContainerFromIndex(m),i instanceof b.TreeViewItem||(i=null);break}j==this&&(i=null,j=null)}}}}if(null!=h)if(a){if(h!==this.SelectedContainer)return h.Focus()}else h.FocusInto()}return!1},e.prototype.OnMouseEnter=function(a){d.prototype.OnMouseEnter.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseLeave=function(a){d.prototype.OnMouseLeave.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseMove=function(a){d.prototype.OnMouseMove.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseLeftButtonDown=function(a){d.prototype.OnMouseLeftButtonDown.call(this,a),!a.Handled&&this.HandleMouseButtonDown()&&(a.Handled=!0),this.UpdateVisualState()},e.prototype.HandleMouseButtonDown=function(){return this.SelectedContainer?(this.SelectedContainer.IsFocused||this.SelectedContainer.Focus(),!0):!1},e.prototype.OnMouseLeftButtonUp=function(a){d.prototype.OnMouseLeftButtonUp.call(this,a),this.UpdateVisualState()},e.prototype.OnGotFocus=function(a){d.prototype.OnGotFocus.call(this,a),this.UpdateVisualState()},e.prototype.OnLostFocus=function(a){d.prototype.OnLostFocus.call(this,a),this.UpdateVisualState()},e.prototype.ChangeSelection=function(b,c,d){if(!this.IsSelectionChangeActive){var e=null,f=null,g=!1,h=this.SelectedContainer;this.IsSelectionChangeActive=!0;try{d&&c!==h?(e=this.SelectedItem,null!=h&&(h.IsSelected=!1,h.UpdateContainsSelection(!1)),f=b,this.SelectedContainer=c,this.SelectedContainer.UpdateContainsSelection(!0),this.SelectedItem=b,this.UpdateSelectedValue(b),g=!0,this.ItemsControlHelper.ScrollIntoView(c.HeaderElement||c)):d||c!==h||(this.SelectedContainer.UpdateContainsSelection(!1),this.SelectedContainer=null,this.SelectedItem=null,this.SelectedValue=null,e=b,g=!0),c.IsSelected=d}finally{this.IsSelectionChangeActive=!1}g&&this.SelectedItemChanged.raise(this,new a.RoutedPropertyChangedEventArgs(e,f))}},e.prototype.UpdateSelectedValue=function(c){if(!c)return void this.ClearValue(e.SelectedValueProperty);var d=this.SelectedValuePath;if(d){var f=new a.Data.Binding(d);f.Source=c;var g=new b.ContentControl;g.SetBinding(b.ContentControl.ContentProperty,f),this.SelectedValue=g.Content,g.ClearValue(b.ContentControl.ContentProperty)}else this.SelectedValue=c},e.prototype.SelectFirstItem=function(){var a=this.ItemContainersManager.ContainerFromIndex(0),c=a instanceof b.TreeViewItem;c||(a=this.SelectedContainer),this.ChangeSelection(c?this.ItemContainersManager.ItemFromContainer(a):this.SelectedItem,a,c)},e.prototype.FocusFirstItem=function(){var a=this.ItemContainersManager.ContainerFromIndex(0);return a?a.IsEnabled&&a.Focus()?!0:a.FocusDown():!1},e.prototype.FocusLastItem=function(){for(var a=this.Items.Count-1;a>=0;--a){var c=this.ItemContainersManager.ContainerFromIndex(a);if(c instanceof b.TreeViewItem&&c.IsEnabled)return c.FocusInto()}return!1},e.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},e,null,function(a,b){return a.OnSelectedItemChanged(b)}),e.SelectedValueProperty=DependencyProperty.Register("SelectedValue",function(){return Object},e,null,function(a,b){return a.OnSelectedValueChanged(b)}),e.SelectedValuePathProperty=DependencyProperty.Register("SelectedValuePath",function(){return String},e,"",function(a,b){return a.OnSelectedValuePathChanged(b)}),e.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return a.Style},e,null,function(a,b){return a.OnItemContainerStyleChanged(b)}),e}(b.ItemsControl);b.TreeView=d,b.TemplateVisualStates(d,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),Object.defineProperty(d.prototype,"SelectedValue",{get:function(){return this.GetValue(d.SelectedValueProperty)},set:function(a){try{this._AllowWrite=!0,this.SetValue(d.SelectedValueProperty,a)}finally{this._AllowWrite=!1}}}),Object.defineProperty(d.prototype,"SelectedItem",{get:function(){return this.GetValue(d.SelectedItemProperty)},set:function(a){try{this._AllowWrite=!0,this.SetValue(d.SelectedItemProperty,a)}finally{this._AllowWrite=!1}}})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){function c(a,b,c,e,f,g){var h={Value:0},i={Value:0};d.GetTopAndBottom(b,c,h,i);var j=0;return a?(j=f-i.Value,f-h.Value):(j=h.Value-e,i.Value-e)}var d=b.Internal.ScrollEx,e=function(d){function e(){d.call(this),this.Collapsed=new a.RoutedEvent,this.Expanded=new a.RoutedEvent,this.Selected=new a.RoutedEvent,this.Unselected=new a.RoutedEvent,this._AllowWrite=!1,this._MultiClick=new b.Internal.MultiClickHelper,this._IsPressed=!1,this.DefaultStyleKey=e}return __extends(e,d),e.prototype.$SetHasItems=function(a){try{this._AllowWrite=!0,this.SetCurrentValue(e.HasItemsProperty,a)}finally{this._AllowWrite=!1}},e.prototype.$SetIsSelectionActive=function(a){try{this._AllowWrite=!0,this.SetCurrentValue(e.IsSelectionActiveProperty,a===!0)}finally{this._AllowWrite=!1}},e.prototype.OnHasItemsChanged=function(a){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetCurrentValue(e.HasItemsProperty,a.OldValue),new InvalidOperationException("Cannot set read-only property HasItems.");this.UpdateVisualState()}},e.prototype.OnIsExpandedPropertyChanged=function(b){var c=b.NewValue===!0;if(c?this.OnExpanded(new a.RoutedEventArgs):this.OnCollapsed(new a.RoutedEventArgs),c){if(null!=this.ExpansionStateGroup||!this.UserInitiatedExpansion)return;this.UserInitiatedExpansion=!1;var d=this.ParentTreeView;if(!d)return;d.ItemsControlHelper.ScrollIntoView(this)}else{if(!this.ContainsSelection)return;this.Focus()}},e.prototype.OnIsSelectedChanged=function(b){this.IgnorePropertyChange?this.IgnorePropertyChange=!1:b.NewValue===!0?(this.Select(!0),this.OnSelected(new a.RoutedEventArgs)):(this.Select(!1),this.OnUnselected(new a.RoutedEventArgs))},e.prototype.OnIsSelectionActiveChanged=function(a){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetValueInternal(e.IsSelectionActiveProperty,a.OldValue),new InvalidOperationException("Cannot set read-only property IsSelectionActive.");this.UpdateVisualState()}},Object.defineProperty(e.prototype,"ExpanderButton",{get:function(){return this._expanderButton},set:function(a){this._expanderButton&&(this._expanderButton.Click.off(this.OnExpanderClick,this),this._expanderButton.GotFocus.off(this.OnExpanderGotFocus,this)),this._expanderButton=a,this._expanderButton&&(this._expanderButton.IsChecked=this.IsExpanded,this._expanderButton.Click.on(this.OnExpanderClick,this),this._expanderButton.GotFocus.on(this.OnExpanderGotFocus,this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HeaderElement",{get:function(){return this._headerElement},set:function(a){this._headerElement&&this._headerElement.MouseLeftButtonDown.off(this.OnHeaderMouseLeftButtonDown,this),this._headerElement=a,this._headerElement&&this._headerElement.MouseLeftButtonDown.on(this.OnHeaderMouseLeftButtonDown,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ExpansionStateGroup",{get:function(){return this._expansionStateGroup},set:function(a){this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.off(this.OnExpansionStateGroupStateChanged,this),this._expansionStateGroup=a,this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.on(this.OnExpansionStateGroupStateChanged,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ParentItemsControl",{get:function(){return this._parentItemsControl},set:function(a){if(this._parentItemsControl!=a){this._parentItemsControl=a;var b=this.ParentTreeView;null!=b&&(this.RequiresContainsSelectionUpdate&&(this.RequiresContainsSelectionUpdate=!1,this.UpdateContainsSelection(!0)),b.CheckForSelectedDescendents(this))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ParentTreeViewItem",{get:function(){var a=this.ParentItemsControl;return a instanceof e?a:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ParentTreeView",{get:function(){for(var a=this;null!=a;a=a.ParentTreeViewItem){var c=a.ParentItemsControl;if(c instanceof b.TreeView)return c}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsRoot",{get:function(){return this.ParentItemsControl instanceof b.TreeView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanExpandOnInput",{get:function(){return this.HasItems&&this.IsEnabled},enumerable:!0,configurable:!0}),e.prototype.OnApplyTemplate=function(){d.prototype.OnApplyTemplate.call(this),this.ExpanderButton=this.GetTemplateChild("ExpanderButton",b.Primitives.ToggleButton),this.HeaderElement=this.GetTemplateChild("Header",a.FrameworkElement),this.ExpansionStateGroup=a.Media.VSM.VisualStateManager.GetGroup(this,"ExpansionStates"),this.UpdateVisualState(!1)},e.prototype.OnExpansionStateGroupStateChanged=function(a,b){b.NewState.Name&&"expanded"===b.NewState.Name.toLowerCase()&&this.BringIntoView()},e.prototype.BringIntoView=function(){var a=this;if(this.UserInitiatedExpansion){this.UserInitiatedExpansion=!1;var b=this.ParentTreeView;b&&setTimeout(function(){b.ItemsControlHelper.ScrollIntoView(a)},1)}},e.prototype.GoToStates=function(a){d.prototype.GoToStates.call(this,a),this.GoToStateExpansion(a),this.GoToStateHasItems(a),this.GoToStateSelection(a)},e.prototype.GoToStateCommon=function(a){return a(this.IsEnabled?this._IsPressed?"Pressed":this.IsMouseOver?"MouseOver":"Normal":"Disabled")},e.prototype.GoToStateExpansion=function(a){return a(this.IsExpanded?"Expanded":"Collapsed")},e.prototype.GoToStateHasItems=function(a){return a(this.HasItems?"HasItems":"NoItems")},e.prototype.GoToStateSelection=function(a){return a(this.IsSelected?this.IsSelectionActive?"Selected":"SelectedInactive":"Unselected")},e.prototype.GetContainerForItem=function(){return new e},e.prototype.IsItemItsOwnContainer=function(a){return a instanceof e},e.prototype.PrepareContainerForItem=function(a,b){var c=a;c instanceof e&&(c.ParentItemsControl=this),d.prototype.PrepareContainerForItem.call(this,a,b)},e.prototype.ClearContainerForItem=function(a,b){var c=a;c instanceof e&&(c.ParentItemsControl=null),d.prototype.ClearContainerForItem.call(this,a,b)},e.prototype.OnItemsChanged=function(a){if(d.prototype.OnItemsChanged.call(this,a),this.$SetHasItems(this.Items.Count>0),null!=a.NewItems)for(var b=0,c=a.NewItems,e=c.length;e>b;b++)c[b].ParentItemsControl=this;switch(a.Action){case 2:case 4:if(this.ContainsSelection){var f=this.ParentTreeView;null==f||f.IsSelectedContainerHookedUp||(this.ContainsSelection=!1,this.Select(!0))}break;case 3:if(this.ContainsSelection){var f=this.ParentTreeView;if(null!=f){var g=f.SelectedItem;null==g||null!=a.OldItems&&!nullstone.equals(g,a.OldItems[0])||f.ChangeSelection(g,f.SelectedContainer,!1)}}}if(null!=a.OldItems)for(var b=0,c=a.OldItems,e=c.length;e>b;b++)c[b].ParentItemsControl=null},e.prototype.OnExpanded=function(a){this.ToggleExpanded(),this.Expanded.raise(this,a)},e.prototype.OnCollapsed=function(a){this.ToggleExpanded(),this.Collapsed.raise(this,a)},e.prototype.ToggleExpanded=function(){var a=this.ExpanderButton;a&&(a.IsChecked=this.IsExpanded,this.UpdateVisualState())},e.prototype.OnSelected=function(a){this.UpdateVisualState(),this.Selected.raise(this,a)},e.prototype.OnUnselected=function(a){this.UpdateVisualState(),this.Unselected.raise(this,a)},e.prototype.OnGotFocus=function(a){d.prototype.OnGotFocus.call(this,a);var b=this.ParentTreeViewItem;b&&(b.CancelGotFocusBubble=!0);try{if(!this.IsEnabled||this.CancelGotFocusBubble)return;this.Select(!0),this.$SetIsSelectionActive(!0),this.UpdateVisualState()}finally{this.CancelGotFocusBubble=!1}},e.prototype.OnLostFocus=function(a){d.prototype.OnLostFocus.call(this,a),this.$SetIsSelectionActive(!1),this.UpdateVisualState()},e.prototype.OnExpanderGotFocus=function(){this.CancelGotFocusBubble=!0,this.$SetIsSelectionActive(!0),this.UpdateVisualState(!0)},e.prototype.OnMouseEnter=function(a){d.prototype.OnMouseEnter.call(this,a),this.UpdateVisualState()},e.prototype.OnMouseLeave=function(a){d.prototype.OnMouseLeave.call(this,a),this.UpdateVisualState()},e.prototype.OnHeaderMouseLeftButtonDown=function(a,b){if(this._MultiClick.OnMouseLeftButtonDown(this,b),!b.Handled&&this.IsEnabled&&(this.Focus()&&(b.Handled=!0),this._MultiClick.ClickCount%2===0)){var c=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!c,this.IsExpanded=!c,b.Handled=!0}this.OnMouseLeftButtonDown(b),this.UpdateVisualState()},e.prototype.OnExpanderClick=function(){var a=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!a,this.IsExpanded=!a},e.prototype.OnMouseLeftButtonDown=function(a){d.prototype.OnMouseLeftButtonDown.call(this,a);var b;!a.Handled&&null!=(b=this.ParentTreeView)&&b.HandleMouseButtonDown()&&(a.Handled=!0),this._IsPressed=!0,this.UpdateVisualState()},e.prototype.OnMouseLeftButtonUp=function(a){d.prototype.OnMouseLeftButtonUp.call(this,a),this._IsPressed=!1,this.UpdateVisualState()},e.prototype.OnIsEnabledChanged=function(a){d.prototype.OnIsEnabledChanged.call(this,a),a.NewValue||(this._IsPressed=!1)},e.prototype.OnKeyDown=function(b){if(d.prototype.OnKeyDown.call(this,b),this.IsEnabled){if(b.Handled)return;var c=1===this.FlowDirection;switch(b.Key){case 14:!a.Input.Keyboard.HasControl()&&(c?this.HandleRightKey():this.HandleLeftKey())&&(b.Handled=!0);break;case 15:!a.Input.Keyboard.HasControl()&&this.HandleUpKey()&&(b.Handled=!0);break;case 16:!a.Input.Keyboard.HasControl()&&(c?this.HandleLeftKey():this.HandleRightKey())&&(b.Handled=!0);break;case 17:!a.Input.Keyboard.HasControl()&&this.HandleDownKey()&&(b.Handled=!0);break;case 79:this.CanExpandOnInput&&!this.IsExpanded&&(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,b.Handled=!0);break;case 80:this.CanExpandOnInput&&this.IsExpanded&&(this.IsExpanded=!1,b.Handled=!0)}}if(this.IsRoot){var e=this.ParentTreeView;e&&e.PropagateKeyDown(b)}},e.prototype.HandleRightKey=function(){return this.CanExpandOnInput?this.IsExpanded?this.HandleDownKey():(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,!0):!1},e.prototype.HandleLeftKey=function(){return this.CanExpandOnInput&&this.IsExpanded?(this.IsFocused?this.Focus():this.IsExpanded=!1,!0):!1},e.prototype.HandleDownKey=function(){return this.AllowKeyHandleEvent()&&this.FocusDown()},e.prototype.HandleUpKey=function(){if(!this.AllowKeyHandleEvent())return!1;var a=this.FindPreviousFocusableItem();return a?a!=this.ParentItemsControl||a!=this.ParentTreeView?a.Focus():!0:!1},e.prototype.HandleScrollByPage=function(a,b,d,f,g,h){var i={Value:0};if(h.Value=c(a,this,b,f,g,i),NumberEx.IsGreaterThanClose(i.Value,d)||NumberEx.IsLessThanClose(h.Value,d))return!1;var j=!1,k=this.HeaderElement;null!=k&&NumberEx.IsLessThanClose(c(a,k,b,f,g,{Value:0}),d)&&(j=!0);for(var l=null,m=this.Items.Count,n=a&&this.ContainsSelection,o=a?m-1:0;o>=0&&m>o;){var p=this.ItemContainersManager.ContainerFromIndex(o);if(p instanceof e&&p.IsEnabled){if(n){if(p.IsSelected){n=!1,o+=a?-1:1;continue}if(!p.ContainsSelection){o+=a?-1:1;continue}n=!1}var q={Value:0};if(p.HandleScrollByPage(a,b,d,f,g,q))return!0;if(NumberEx.IsGreaterThanClose(q.Value,d))break;l=p}o+=a?-1:1}return null!=l?a?l.Focus():l.FocusInto():j?this.Focus():!1},e.prototype.Select=function(a){var b=this.ParentTreeView;if(b&&!b.IsSelectionChangeActive){var c=this.ParentTreeViewItem,d=null!=c?c.ItemContainersManager.ItemFromContainer(this):b.ItemContainersManager.ItemFromContainer(this);b.ChangeSelection(d,this,a)}},e.prototype.UpdateContainsSelection=function(a){for(var b=this.ParentTreeViewItem;null!=b;b=b.ParentTreeViewItem)b.ContainsSelection=a},e.prototype.AllowKeyHandleEvent=function(){return this.IsSelected},e.prototype.FocusDown=function(){var a=this.FindNextFocusableItem(!0);return a&&a.Focus()},e.prototype.FocusInto=function(){var a=this.FindLastFocusableItem();return a&&a.Focus()},e.prototype.FindNextFocusableItem=function(a){if(a&&this.IsExpanded&&this.HasItems){var b=this.ItemContainersManager.ContainerFromIndex(0);if(b instanceof e)return b.IsEnabled?b:b.FindNextFocusableItem(!1)}var c=this.ParentItemsControl;if(null!=c){for(var d=c.ItemContainersManager.IndexFromContainer(this),f=c.Items.Count;d++<f;){var b=c.ItemContainersManager.ContainerFromIndex(d);if(b instanceof e&&b.IsEnabled)return b}var g=this.ParentTreeViewItem;if(g instanceof e)return g.FindNextFocusableItem(!1)}return null},e.prototype.FindLastFocusableItem=function(){for(var a=this,b=null,c=-1;a instanceof e;a=b.ItemContainersManager.ContainerFromIndex(c))if(a.IsEnabled){if(!a.IsExpanded||!a.HasItems)return a;b=a,c=a.Items.Count-1}else{if(!(c>0))break;--c}return b},e.prototype.FindPreviousFocusableItem=function(){var a=this.ParentItemsControl;if(!a)return null;for(var b=a.ItemContainersManager.IndexFromContainer(this);b-->0;){var c=a.ItemContainersManager.ContainerFromIndex(b);if(c instanceof e&&c.IsEnabled){var d=c.FindLastFocusableItem();if(null!=d)return d}}return a},e.HasItemsProperty=DependencyProperty.RegisterReadOnly("HasItems",function(){return Boolean},e,!1,function(a,b){return a.OnHasItemsChanged(b)}),e.IsExpandedProperty=DependencyProperty.Register("IsExpanded",function(){return Boolean},e,!1,function(a,b){return a.OnIsExpandedPropertyChanged(b)}),e.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},e,!1,function(a,b){return a.OnIsSelectedChanged(b)}),e.IsSelectionActiveProperty=DependencyProperty.RegisterReadOnly("IsSelectionActive",function(){return Boolean},e,!1,function(a,b){return a.OnIsSelectionActiveChanged(b)}),e}(b.HeaderedItemsControl);b.TreeViewItem=e,b.TemplateVisualStates(e,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ExpansionStates",Name:"Collapsed"},{GroupName:"ExpansionStates",Name:"Expanded"},{GroupName:"HasItemsStates",Name:"HasItems"},{GroupName:"HasItemsStates",Name:"NoItems"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"},{GroupName:"SelectionStates",Name:"SelectedInactive"}),b.TemplateParts(e,{Name:"Header",Type:a.FrameworkElement},{Name:"ExpanderButton",Type:b.Primitives.ToggleButton})}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(a){function b(b,c){a.call(this),this.Handled=!1,Object.defineProperty(this,"Text",{value:b,writable:!1}),Object.defineProperty(this,"Error",{value:c,writable:!1})}return __extends(b,a),b}(a.RoutedEventArgs);b.UpDownParseErrorEventArgs=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(a){function b(b){a.call(this),this.Value=null,this.Handled=!1,Object.defineProperty(this,"Text",{value:b,writable:!1})}return __extends(b,a),b}(a.RoutedEventArgs);b.UpDownParsingEventArgs=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){this.mousePosition=new Point,this.$$rootVisual=null,a.LayoutUpdated.on(this._HandleLayoutUpdated,this)}return Object.defineProperty(a.prototype,"rootVisual",{get:function(){return this.$$rootVisual},set:function(a){this.$$rootVisual&&(this.$$rootVisual.MouseMove.off(this._HandleRootVisualMouseMove,this),this.$$rootVisual.SizeChanged.off(this._HandleSizeChanged,this)),this.$$rootVisual=a,a&&(a.MouseMove.on(this._HandleRootVisualMouseMove,this),a.SizeChanged.on(this._HandleSizeChanged,this))},enumerable:!0,configurable:!0}),a.prototype.tryInit=function(a){if(a){var b=a.XamlNode.LayoutUpdater.tree.surface;b&&(this.rootVisual=b.App.RootVisual)}},a.prototype.setOnSizeChanged=function(a){this.$$onSizeChanged=a},a.prototype.getAvailableSize=function(){return new minerva.Size(this.rootVisual.ActualWidth,this.rootVisual.ActualHeight)},a.prototype._HandleLayoutUpdated=function(a){if(!this.rootVisual){var b=a.XamlNode.LayoutUpdater.tree.surface;b&&(this.rootVisual=b.App.RootVisual)}this.rootVisual&&a.LayoutUpdated.off(this._HandleLayoutUpdated,this)},a.prototype._HandleRootVisualMouseMove=function(a,b){this.mousePosition=b.GetPosition(null)},a.prototype._HandleSizeChanged=function(a,b){this.$$onSizeChanged&&this.$$onSizeChanged(b.NewSize)},a}();a.RootVisualTracker=b}(b=a.contextmenu||(a.contextmenu={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c;!function(b){var c=function(b){function c(a){b.call(this),this._ValueBinding=null,this._ValueBinding=a}return __extends(c,b),Object.defineProperty(c.prototype,"ValueBinding",{get:function(){return this._ValueBinding},enumerable:!0,configurable:!0}),c.prototype.GetDynamicValue=function(b){var d=this._ValueBinding,e=new a.Data.Binding;e.BindsDirectlyToSource=d.BindsDirectlyToSource,e.Converter=d.Converter,e.ConverterCulture=d.ConverterCulture,e.ConverterParameter=d.ConverterParameter,e.FallbackValue=d.FallbackValue,e.Mode=d.Mode,e.NotifyOnValidationError=d.NotifyOnValidationError,e.Path=d.Path,e.StringFormat=d.StringFormat,e.TargetNullValue=d.TargetNullValue,e.UpdateSourceTrigger=d.UpdateSourceTrigger,e.ValidatesOnDataErrors=d.ValidatesOnDataErrors,e.ValidatesOnExceptions=d.ValidatesOnExceptions,e.ValidatesOnNotifyDataErrors=d.ValidatesOnNotifyDataErrors,e.Source=b,this.SetBinding(c.ValueProperty,e);var f=this.Value;return this.ClearValue(c.ValueProperty),f},c.ValueProperty=DependencyProperty.Register("Value",function(){return Object},c),c}(a.FrameworkElement);b.BindingSourceEvaluator=c}(c=b.Internal||(b.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(a,b,c){this.Owner=a,this.OnCoerceValue=b,this.OnCoerceCurrentIndex=c,this.TextBox=null,this.Text="",this.IsCoercing=!1,this._IsEditing=!1,this._IsInvalidInput=!1,this.Owner.KeyDown.on(this.OnKeyDown,this)}return Object.defineProperty(b.prototype,"IsEditing",{get:function(){return this._IsEditing},set:function(a){a!==this._IsEditing&&(this._IsEditing=a,this.OnIsEditingChanged(a))},enumerable:!0,configurable:!0}),b.prototype.OnIsEditingChanged=function(a){this.Owner.OnIsEditingChanged(a),this.TextBox&&(a?(this.TextBox.IsFocused&&this.TextBox.Select(0,this.TextBox.Text.length),this.TextBox.IsHitTestVisible=!0):(this.TextBox.Text=this.Owner.FormatValue(),this.TextBox.IsHitTestVisible=!1))},Object.defineProperty(b.prototype,"IsInvalidInput",{get:function(){return this._IsInvalidInput},set:function(a){a!==this._IsInvalidInput&&(this._IsInvalidInput=a,this.Owner.OnIsInvalidInputChanged(a))},enumerable:!0,configurable:!0}),b.prototype.Attach=function(a){this.TextBox=a,a&&(a.GotFocus.on(this.TextBox_GotFocus,this),a.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()},b.prototype.Detach=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this)),this.TextBox=null},b.prototype.OnKeyDown=function(a,b){if(null==b||3!==b.Key&&9!==b.Key||this.IsEditing||!this.Owner.IsEditable){if(null==b||b.Handled)return;8===b.Key?(this.IsInvalidInput=!1,this.IsEditing=!1,b.Handled=!0):!this.IsEditing&&this.Owner.IsEditable&&(this.IsEditing=!0)}else this.IsEditing=!0,b.Handled=!0},b.prototype.EscapeFocus=function(){var a=this;this.IsInvalidInput?1===this.Owner.InvalidInputAction&&this.TextBox.IsFocused&&window.setTimeout(function(){return a.TextBox.Focus()},1):this.IsEditing=!1},b.prototype.OnValueChanged=function(a,b){if(!this.IsCoercing){var c=this.Owner.Items.IndexOf(b);c>-1&&(this.IsCoercing=!0,this.OnCoerceCurrentIndex(c),this.IsCoercing=!1)}this.UpdateTextBoxText(),this.Owner.OnValueChanged(a,b)},b.prototype.OnCurrentIndexChanged=function(a,b){this.IsCoercing||b>=0&&b<this.Owner.Items.Count&&(this.IsCoercing=!0,this.OnCoerceValue(this.Owner.Items.GetValueAt(b)),this.IsCoercing=!1),this.IsEditing=!1,this.Owner.OnCurrentIndexChanged(a,b)},b.prototype.TextBox_LostFocus=function(){this.ProcessUserInput()},b.prototype.TextBox_GotFocus=function(){this.SelectAllText()},b.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},b.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Owner.FormatValue()||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},b.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Owner.IsEditable)},b.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var a=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),a<this.TextBox.Text.length&&(this.TextBox.SelectionStart=a)}},b.prototype.OnParseError=function(a){this.Owner.ParseError.raise(this,a)},b.prototype.ApplyValue=function(b){if(this.Owner.IsEditable){this.IsEditing=!0;try{var c={Value:null};this.IsInvalidInput=!this.Owner.TryParseValue(b,c),this.OnCoerceValue(c.Value)}catch(d){var e=new a.UpDownParseErrorEventArgs(b,d);this.OnParseError(e),e.Handled||this.UpdateTextBoxText()}finally{this.IsInvalidInput||(this.IsEditing=!1)}}},b}();b.DomainCoercer=c}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.Attach=function(a,b){var c=this;this._Callback=b,a.on(this._OnEvent,this),this.Detach=function(){a.off(c._OnEvent,c),c.Detach=function(){}}},a.prototype.Detach=function(){},a.prototype._OnEvent=function(a,b){this._Callback&&this._Callback(a,b)},a}();a.EventGesture=b}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(a){function b(b,c,d,e){a.call(this,b,c,d),this.OnCoerceFormat=e}return __extends(b,a),b.prototype.OnDecimalPlacesChanged=function(){this.CoerceDepth++,this.OnCoerceFormat(),this.CoerceDepth--},b.prototype.AddToValue=function(a){this.OnCoerceValue(this.Value+a),this.RequestedVal=this.Value},b}(a.RangeCoercer);a.FormattedRangeCoercer=b}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c;!function(c){function d(a){if(a instanceof g){var b=a,c={};return Object.defineProperty(c,"ActualSize",{get:function(){return b.ActualHeight}}),Object.defineProperty(c,"MaxSize",{get:function(){return b.MaxHeight||0}}),Object.defineProperty(c,"MinSize",{get:function(){return b.MinHeight||0}}),Object.defineProperty(c,"Size",{get:function(){return b.Height},set:function(a){b.Height=a}}),Object.defineProperty(c,"IsStar",{get:function(){return!!b.Height&&2===b.Height.Type}}),c.Index=0,c.OrigActualSize=b.ActualHeight,c}if(a instanceof h){var d=a,c={};return Object.defineProperty(c,"ActualSize",{get:function(){return d.ActualWidth}}),Object.defineProperty(c,"MaxSize",{get:function(){return d.MaxWidth||0}}),Object.defineProperty(c,"MinSize",{get:function(){return d.MinWidth||0}}),Object.defineProperty(c,"Size",{get:function(){return d.Width},set:function(a){d.Width=a}}),Object.defineProperty(c,"IsStar",{get:function(){return!!d.Width&&2===d.Width.Type}}),c.Index=0,c.OrigActualSize=d.ActualWidth,c}}minerva.controls.grid.GridUnitType;!function(a){a[a.Auto=0]="Auto",a[a.Columns=1]="Columns",a[a.Rows=2]="Rows"}(c.GridResizeDirection||(c.GridResizeDirection={}));c.GridResizeDirection;!function(a){a[a.BasedOnAlignment=0]="BasedOnAlignment",a[a.CurrentAndNext=1]="CurrentAndNext",a[a.PreviousAndCurrent=2]="PreviousAndCurrent",a[a.PreviousAndNext=3]="PreviousAndNext"
}(c.GridResizeBehavior||(c.GridResizeBehavior={}));c.GridResizeBehavior;!function(a){a[a.Split=0]="Split",a[a.ResizeDefinition1=1]="ResizeDefinition1",a[a.ResizeDefinition2=2]="ResizeDefinition2"}(c.SplitBehavior||(c.SplitBehavior={}));var e=(c.SplitBehavior,function(){function a(a){this.UpdateResizeDirection(a),this.Behavior=f[1!==this.Direction?a.VerticalAlignment:a.HorizontalAlignment]||3,this.SplitterLength=Math.min(a.ActualWidth,a.ActualHeight)}return a.prototype.Setup=function(a,c){var e=1===this.Direction,f=e?b.Grid.GetColumnSpan(a):b.Grid.GetRowSpan(a);if(f>1)return!1;var g=e?b.Grid.GetColumn(a):b.Grid.GetRow(a),h=this.GetBehaviorIndices(g),i=e?c.ColumnDefinitions:c.RowDefinitions;return h[0]<0||h[1]>=i.Count?!1:(this.SplitterIndex=g,this.DS1=d(i.GetValueAt(h[0])),this.DS1.Index=h[0],this.DS2=d(i.GetValueAt(h[1])),this.DS2.Index=h[1],this.SplitBehavior=this.DS1.IsStar&&this.DS2.IsStar?0:this.DS1.IsStar?2:1,!0)},a.prototype.Move=function(a,b,c){var d=this.DS1,e=this.DS2;if(!d||!e)return!0;if(0===this.SplitBehavior&&!NumberEx.AreClose(d.ActualSize+e.ActualSize,d.OrigActualSize+e.OrigActualSize))return!1;var f=this.GetConstraints(),g=f[0],h=f[1],i=1===this.Direction?b:c;return i=Math.min(Math.max(i,g),h),this.SetLengths(a,d.ActualSize+i,e.ActualSize-i),!0},a.prototype.UpdateResizeDirection=function(a){var b=this.Direction;return this.Direction=3!==a.HorizontalAlignment?1:3===a.VerticalAlignment&&a.ActualWidth<=a.ActualHeight?1:2,b!==this.Direction},a.prototype.SetLengths=function(a,c,e){if(0!==this.SplitBehavior)return void(1===this.SplitBehavior?this.DS1.Size=new b.GridLength(c,1):this.DS2.Size=new b.GridLength(e,1));for(var f=1===this.Direction?a.ColumnDefinitions.getEnumerator():a.RowDefinitions.getEnumerator(),g=0;f.moveNext();){var h=d(f.current);this.DS1.Index===g?h.Size=new b.GridLength(c,2):this.DS2.Index===g?h.Size=new b.GridLength(e,2):h.IsStar&&(h.Size=new b.GridLength(h.ActualSize,2)),g++}},a.prototype.GetConstraints=function(){var a=this.DS1.ActualSize,b=this.DS1.MinSize,c=this.DS1.MaxSize,d=this.DS2.ActualSize,e=this.DS2.MinSize,f=this.DS2.MaxSize;return this.SplitterIndex===this.DS1.Index?b=Math.max(b,this.SplitterLength):this.SplitterIndex===this.DS2.Index&&(e=Math.max(e,this.SplitterLength)),0===this.SplitBehavior?[-Math.min(a-b,f-d),Math.min(c-a,d-e)]:1!==this.SplitBehavior?[d-f,d-e]:[b-a,c-a]},a.prototype.GetBehaviorIndices=function(a){switch(this.Behavior){case 1:return[a,a+1];case 2:return[a-1,a];default:return[a-1,a+1]}},a}());c.GridSplitterResizer=e;var f=[];f[0]=2,f[2]=1,f[0]=2,f[2]=1;var g=a.Controls.RowDefinition,h=a.Controls.ColumnDefinition}(c=b.Internal||(b.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(a){this.ItemsControl=a}return Object.defineProperty(c.prototype,"ItemsHost",{get:function(){if(!(this._itemsHost instanceof b.Panel)&&null!=this.ItemsControl&&null!=this.ItemsControl.ItemContainersManager){var c=this.ItemsControl.ItemContainersManager.ContainerFromIndex(0);null!=c&&(this._itemsHost=a.VisualTreeHelper.GetParent(c))}return this._itemsHost},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"ScrollHost",{get:function(){if(!this._scrollHost){var c=this.ItemsHost;if(null!=c)for(var d=c;d!==this.ItemsControl&&null!=d;d=a.VisualTreeHelper.GetParent(d)){var e=d;if(e instanceof b.ScrollViewer){this._scrollHost=e;break}}}return this._scrollHost},enumerable:!0,configurable:!0}),c.prototype.OnApplyTemplate=function(){this._itemsHost=null,this._scrollHost=null},c.PrepareContainerForItemOverride=function(c,d){if(d){var e=c instanceof b.Control?c:null;e&&null==e.Style&&e.SetValue(a.FrameworkElement.StyleProperty,d)}},c.prototype.UpdateItemContainerStyle=function(a){if(a){var b=this.ItemsHost;if(b&&b.Children)for(var c=b.Children.getEnumerator();c.moveNext();){var d=c.current;d.Style||(d.Style=a)}}},c.prototype.ScrollIntoView=function(a){var b=this.ScrollHost;if(b){var c;try{c=a.TransformToVisual(b)}catch(d){return}var e=c.Transform(new Point),f=c.Transform(new Point(a.ActualWidth,a.ActualHeight)),g=new minerva.Rect(e.x,e.y,f.x,f.y),h=b.VerticalOffset,i=0,j=b.ViewportHeight,k=g.y+g.height;k>j&&(i=k-j,h+=i);var l=g.y;0>l-i&&(h-=i-l),b.ScrollToVerticalOffset(h);var m=b.HorizontalOffset,n=0,o=b.ViewportWidth,p=g.x+g.width;p>o&&(n=p-o,m+=n);var q=g.x;0>q-n&&(m-=n-q),b.ScrollToHorizontalOffset(m)}},c}();c.ItemsControlHelper=d}(c=b.Internal||(b.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){function b(a,b){var c=b.x,d=b.y;return a&&(c-=a.x,d-=a.y),c*c+d*d}var c=function(){function a(){this.ClickCount=0}return a.prototype.OnMouseLeftButtonDown=function(a,c){if(!a.IsEnabled)return void(this.ClickCount=1);var d=(new Date).getTime(),e=d-this.LastClickTime,f=c.GetPosition(a),g=b(this.LastClickPosition,f);500>e&&9>g?this.ClickCount++:this.ClickCount=1,this.LastClickTime=d,this.LastClickPosition=f},a}();a.MultiClickHelper=c}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c;!function(b){var c=function(a){function b(b){if(a.call(this),this.IsReadOnly=!1,b)for(var c=b.getEnumerator();c.moveNext();)this.Add(c.current)}return __extends(b,a),b.prototype.Add=function(b){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.Add.call(this,b)},b.prototype.AddRange=function(b){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.AddRange.call(this,b)},b.prototype.Insert=function(b,c){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.Insert.call(this,b,c)},b.prototype.RemoveAt=function(b){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.RemoveAt.call(this,b)},b.prototype.SetValueAt=function(b,c){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.SetValueAt.call(this,b,c)},b.prototype.Clear=function(){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");a.prototype.Clear.call(this)},b}(a.Collections.ObservableCollection);b.ObservableObjectCollection=c}(c=b.Internal||(b.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){function b(a,b){b+=a.VerticalOffset,b=Math.max(Math.min(b,a.ExtentHeight),0),a.ScrollToVerticalOffset(b)}function c(a,b){b+=a.HorizontalOffset,b=Math.max(Math.min(b,a.ExtentWidth),0),a.ScrollToHorizontalOffset(b)}var d=function(){function a(){}return a.HandleKey=function(b,c,d){if(!b)return!1;var e=1===d;switch(c){case 10:return NumberEx.IsGreaterThanClose(b.ExtentHeight,b.ViewportHeight)?a.PageUp(b):a.PageLeft(b),!0;case 11:return NumberEx.IsGreaterThanClose(b.ExtentHeight,b.ViewportHeight)?a.PageDown(b):a.PageRight(b),!0;case 12:return a.ScrollToBottom(b),!0;case 13:return a.ScrollToTop(b),!0;case 14:return e?a.LineRight(b):a.LineLeft(b),!0;case 15:return a.LineUp(b),!0;case 16:return e?a.LineLeft(b):a.LineRight(b),!0;case 17:return a.LineDown(b),!0}return!1},a.LineUp=function(a){b(a,-16)},a.LineDown=function(a){b(a,16)},a.LineLeft=function(a){c(a,-16)},a.LineRight=function(a){c(a,16)},a.PageUp=function(a){b(a,-a.ViewportHeight)},a.PageDown=function(a){b(a,a.ViewportHeight)},a.PageLeft=function(a){c(a,-a.ViewportWidth)},a.PageRight=function(a){c(a,a.ViewportWidth)},a.ScrollToTop=function(a){a.ScrollToVerticalOffset(0)},a.ScrollToBottom=function(a){a.ScrollToVerticalOffset(a.ExtentHeight)},a.GetTopAndBottom=function(a,b,c,d){var e=a.TransformToVisual(b);c.Value=e.Transform(new Point(0,0)).y,d.Value=e.Transform(new Point(0,a.ActualHeight)).y},a}();a.ScrollEx=d}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a){var b=this;this._ActiveBox=null,this._IsMouseDown=!1,this._TextBoxes=[],this._TextBoxes=a=a.filter(function(a){return!!a}),a.forEach(function(a){a.MouseLeftButtonDown.on(b._MouseDown,b),a.MouseLeftButtonUp.on(b._MouseUp,b),a.GotFocus.on(b._GotFocus,b),a.LostFocus.on(b._LostFocus,b)})}return Object.defineProperty(a.prototype,"ActiveBox",{get:function(){return this._ActiveBox},enumerable:!0,configurable:!0}),a.prototype.Dispose=function(){var a=this;this._TextBoxes.forEach(function(b){b.MouseLeftButtonDown.off(a._MouseDown,a),b.MouseLeftButtonUp.off(a._MouseUp,a),b.GotFocus.off(a._GotFocus,a),b.LostFocus.off(a._LostFocus,a)})},a.prototype._GotFocus=function(a){this._IsMouseDown||a.SelectAll()},a.prototype._MouseDown=function(){this._IsMouseDown=!0},a.prototype._MouseUp=function(a){this._IsMouseDown=!1,this._ActiveBox!==a&&(this._ActiveBox=a,this._ActiveBox.SelectionLength<=0&&a.SelectAll())},a.prototype._LostFocus=function(a){a.Select(0,0),this._ActiveBox===a&&(this._ActiveBox=null)},a}();a.SelectionHandler=b}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(){function a(a,b){this.Owner=a,this.Spinner=b,this.Owner&&(this.Owner.KeyDown.on(this.OnKeyDown,this),this.Owner.MouseWheel.on(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)}return a.prototype.UpdateValid=function(a,b){var c=0;a&&(c|=1),b&&(c|=2),this.Spinner&&(this.Spinner.ValidSpinDirection=c)},a.prototype.Dispose=function(){this.Owner&&(this.Owner.KeyDown.off(this.OnKeyDown,this),this.Owner.MouseWheel.off(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)},a.prototype.OnKeyDown=function(a,b){if(!b.Handled)switch(b.Key){case 3:this.Owner.OnSpin(),b.Handled=!0;break;case 15:this.DoIncrement(),b.Handled=!0;break;case 17:this.DoDecrement(),b.Handled=!0}},a.prototype.OnMouseWheel=function(a,b){b.Handled||(b.Delta<0?this.DoDecrement():0<b.Delta&&this.DoIncrement(),b.Handled=!0)},a.prototype.Spinner_Spin=function(a,b){this.Owner.OnSpin(),this.Spinner&&(0===b.Direction?this.DoIncrement():this.DoDecrement())},a.prototype.DoIncrement=function(){this.Spinner&&1===(1&this.Spinner.ValidSpinDirection)&&this.Owner.OnIncrement()},a.prototype.DoDecrement=function(){this.Spinner&&2===(2&this.Spinner.ValidSpinDirection)&&this.Owner.OnDecrement()},a}();a.SpinFlow=b}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(b){var c=function(){function b(a,b,c){this.Control=a,this.TextBox=b,this.OnCoerceValue=c,this.Text="",this.TextBox&&(this.TextBox.GotFocus.on(this.TextBox_GotFocus,this),this.TextBox.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()}return Object.defineProperty(b.prototype,"Value",{get:function(){return this.Control.Value},enumerable:!0,configurable:!0}),b.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var a=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),a<this.TextBox.Text.length&&(this.TextBox.SelectionStart=a)}},b.prototype.Dispose=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this))},b.prototype.TextBox_LostFocus=function(){this.ProcessUserInput()},b.prototype.TextBox_GotFocus=function(){this.SelectAllText()},b.prototype.ApplyValue=function(b){var c,d=new a.UpDownParsingEventArgs(b),e=null;try{c=this.Control.ParseValue(b),d.Value=c}catch(f){e=f}try{this.OnParsing(d)}catch(f){}if(null==e){{var g=d.Handled?d.Value:c;this.Value}this.Value===g&&this.UpdateTextBoxText(),this.OnCoerceValue(g)}else if(d.Handled)this.Value===d.Value&&this.UpdateTextBoxText(),this.OnCoerceValue(d.Value);else{var h=new a.UpDownParseErrorEventArgs(b,e);this.OnParseError(h),h.Handled||this.UpdateTextBoxText()}},b.prototype.OnParseError=function(a){this.Control.ParseError.raise(this,a)},b.prototype.OnParsing=function(a){this.Control.Parsing.raise(this,a)},b.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},b.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Control.FormatValue(this.Value)||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},b.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Control.IsEditable)},b}();b.TextBoxFormatter=c}(b=a.Internal||(a.Internal={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.CreateLayoutUpdater=function(){return new b.tabpanel.TabPanelUpdater},Object.defineProperty(d.prototype,"TabAlignment",{get:function(){var c=a.VisualTreeHelper.GetParentOfType(this,b.TabControl);return null!=c?c.TabStripPlacement:1},enumerable:!0,configurable:!0}),d.setTabAlignment=function(a,b){if(a){var c=a.XamlNode.LayoutUpdater;c.assets.tabAlignment=b}},d}(b.Panel);b.TabPanel=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.init=function(){this.setMeasurePipe(minerva.singleton(a.measure.TabPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(a.arrange.TabPanelArrangePipeDef));var c=this.assets;c.tabAlignment=1,c.numRows=1,c.numHeaders=0,c.rowHeight=0,b.prototype.init.call(this)},c}(minerva.controls.panel.PanelUpdater);a.TabPanelUpdater=b}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(){b.call(this),this.addTapinAfter("doOverride","doVertical",a.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",a.tapins.doHorizontal).removeTapin("doOverride")}return __extends(c,b),c}(minerva.controls.panel.arrange.PanelArrangePipeDef);a.TabPanelArrangePipeDef=b}(b=a.arrange||(a.arrange={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,e,f){if(1!==b.tabAlignment&&3!==b.tabAlignment)return!0;var g=c.finalSize,h=b.numRows>1,i=0,j=[],k=new d,l=a.helpers.getHeadersSize(f);h&&(j=a.helpers.calculateHeaderDistribution(f,g.width,l),i=a.helpers.getActiveRow(f,j,1===b.tabAlignment),1===b.tabAlignment&&(k.y=(b.numRows-1-i)*b.rowHeight),3===b.tabAlignment&&0!==i&&(k.y=(b.numRows-i)*b.rowHeight));var m=c.childRect;m.x=m.y=m.width=m.height=0,m.height=b.rowHeight;for(var n=0,o=0,p=f.walk();p.step();){var q=p.current;if(1!==q.assets.visibility){m.width=l[n],m.height=b.rowHeight;var r=h&&(o<j.length&&j[o]===n||n===b.numHeaders-1);r&&(m.width=g.width-k.x),q.arrange(m),m.x+=m.width,r&&(o===i&&1===b.tabAlignment||o===i-1&&3===b.tabAlignment?k.y=0:k.y+=b.rowHeight,k.x=0,o++),n++}}return!0}var d=minerva.Point;b.doHorizontal=c}(c=b.tapins||(b.tapins={}))}(b=a.arrange||(a.arrange={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,d,e){if(0!==b.tabAlignment&&2!==b.tabAlignment)return!0;var f=c.childRect;f.x=f.y=0,f.width=c.finalSize.width;for(var g=e.walk();g.step();){var h=g.current;if(1!==h.assets.visibility){a.helpers.setTabItemZ(h);var i=a.helpers.getDesiredSizeWithoutMargin(h);f.height=i.height,h.arrange(f),f.y+=i.height}}return!0}b.doVertical=c}(c=b.tapins||(b.tapins={}))}(b=a.arrange||(a.arrange={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c;!function(c){{var d,e=minerva.Size;minerva.Visibility}!function(c){function d(a){var b=f(a),c=new e;e.copyTo(a.assets.desiredSize,c);var d=a.assets.margin;return c.height=Math.max(0,c.height-d.top-d.bottom),c.width=Math.max(0,c.width-d.left-d.right+b),c}function f(c){var d=c.getAttachedValue("$node"),e=d?d.XObject:null;if(!(e instanceof b.TabItem)||e.IsSelected)return 0;var f=e.GetTemplate(e.IsSelected,e.TabStripPlacement);if(!(f instanceof b.Panel)||f.Children.Count<=0)return 0;var g=f.Children.GetValueAt(0);return g instanceof a.FrameworkElement&&g.Margin?Math.abs(g.Margin.left+g.Margin.right):0}function g(a){for(var b=[],c=a.walk();c.step();){var e=c.current,f=1===e.assets.visibility?0:d(e).width;b.push(f)}return b}function h(a){var c=a.getAttachedValue("$node"),d=c?c.XObject:null;if(d instanceof b.TabItem){var e=d.IsSelected?1:0;d.SetCurrentValue(b.Canvas.ZIndexProperty,e)}}function i(a){var c=a.getAttachedValue("$node"),d=c?c.XObject:null;return d instanceof b.TabItem?d.IsSelected===!0:void 0}function j(a,b,c){var d=0,e=0;if(b.length>0)for(var f=a.walk();f.step();){var g=f.current;if(i(g))return d;d<b.length&&b[d]===e&&++d,++e}return c&&(d=this._NumberOfRows-1),d}function k(a,b,c){for(var d=0,e=c.length,f=this._NumberOfRows-1,g=0,h=0,i=new Array(f),j=new Array(f),k=new Array(this._NumberOfRows),l=k.slice(0),m=k.slice(0),n=k.slice(0),o=0,p=0;e>p;++p)if(g+c[p]>b&&h>0){l[o]=g,k[o]=h;var q=Math.max(0,(b-g)/h);m[o]=q,i[o]=p-1,q>d&&(d=q),++o,g=c[p],h=1}else g+=c[p],0!=c[p]&&++h;if(0===o)return[];l[o]=g,k[o]=h;var r=(b-g)/h;for(m[o]=r,r>d&&(d=r),j=i.slice(0),n=m.slice(0);;){var q=0;do{for(var s=0,t=0,p=0;p<this._NumberOfRows;++p)t<m[p]&&(t=m[p],s=p);if(0==s)break;var p=s,u=p-1,v=i[u],w=c[v];if(l[p]+=w,!(l[p]<=b))break;--i[u],++k[p],l[u]-=w,--k[u],m[u]=(b-l[u])/k[u],m[p]=(b-l[p])/k[p],q=0;for(var x=0;x<this._NumberOfRows;++x)q<m[x]&&(q=m[x])}while(q>=d);d=q,j=i.slice(0),n=m.slice(0)}for(var y=0,z=0,A=a.walk();A.step();){var B=A.current;0===B.assets.visibility&&(c[z]+=n[y]),f>y&&j[y]==z&&++y,++z}return j}c.getDesiredSizeWithoutMargin=d,c.getHeadersSize=g,c.setTabItemZ=h,c.getActiveRow=j,c.calculateHeaderDistribution=k}(d=c.helpers||(c.helpers={}))}(c=b.tabpanel||(b.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=minerva.controls.panel,c=function(b){function c(){b.call(this),this.addTapinAfter("doOverride","doVertical",a.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",a.tapins.doHorizontal).removeTapin("doOverride")}return __extends(c,b),c.prototype.createOutput=function(){var a=b.prototype.createOutput.call(this);return a.numRows=1,a.numHeaders=0,a.rowHeight=0,a},c.prototype.prepare=function(a,c,d){d.numRows=a.numRows,d.numHeaders=a.numHeaders,d.rowHeight=a.rowHeight,b.prototype.prepare.call(this,a,c,d)},c.prototype.flush=function(a,c,d){b.prototype.flush.call(this,a,c,d),a.numRows=d.numRows,a.numHeaders=d.numHeaders,a.rowHeight=d.rowHeight},c}(b.measure.PanelMeasurePipeDef);a.TabPanelMeasurePipeDef=c}(b=a.measure||(a.measure={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,d,e,f){if(1!==b.tabAlignment&&3!==b.tabAlignment)return!0;var g=d.desiredSize;g.width=g.height=0,d.numRows=1,d.numHeaders=0,d.rowHeight=0;for(var h=0,i=0,j=0,k=e.walk();k.step();){var l=k.current;if(1===l.assets.visibility)break;d.numHeaders++,l.measure(c.availableSize);var m=a.helpers.getDesiredSizeWithoutMargin(l);d.rowHeight<m.height&&(d.rowHeight=m.height),i+m.width>f.width&&h>0?(i>j&&(j=i),i=m.width,h=1,d.numRows++):(i+=m.width,h++)}return i>j&&(j=i),g.height=d.rowHeight*d.numRows,g.width=!isFinite(g.width)||isNaN(g.width)||j<f.width?j:f.width,!0}b.doHorizontal=c}(c=b.tapins||(b.tapins={}))}(b=a.measure||(a.measure={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,d,e){if(0!==b.tabAlignment&&2!==b.tabAlignment)return!0;var f=d.desiredSize;f.width=f.height=0,d.numRows=1,d.numHeaders=0,d.rowHeight=0;for(var g=e.walk();g.step();){var h=g.current;if(1===h.assets.visibility)break;d.numHeaders++,h.measure(c.availableSize);var i=a.helpers.getDesiredSizeWithoutMargin(h);f.width<i.width&&(f.width=i.width),f.height+=i.height}return!0}b.doVertical=c}(c=b.tapins||(b.tapins={}))}(b=a.measure||(a.measure={}))}(b=a.tabpanel||(a.tabpanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b=function(){function a(a,b){this.Handled=!1,Object.defineProperties(this,{Item:{value:a,writable:!1},Target:{value:b,writable:!1}})}return a}();a.FocusingInvalidControlEventArgs=b}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=a.Collections.ObservableCollection,d=a.Collections.ReadOnlyObservableCollection,e=function(c){function e(){c.call(this),this._ErrorsListBox=null,this._HeaderContentControl=null,this._ValidationSummaryItemDictionary={},this._Errors=new f,this._DisplayedErrors=new f,this.FocusingInvalidControl=new nullstone.Event,this.SelectionChanged=new nullstone.Event,this.DefaultStyleKey=e,this._Errors.CollectionChanged.on(this.Errors_CollectionChanged,this),this.Loaded.on(this.ValidationSummary_Loaded,this),this.Unloaded.on(this.ValidationSummary_Unloaded,this),this.IsEnabledChanged.on(this.ValidationSummary_IsEnabledChanged,this)}return __extends(e,c),e.GetShowErrorsInSummary=function(a){return a.GetValue(e.ShowErrorsInSummaryProperty)===!0},e.SetShowErrorsInSummary=function(a,b){a.SetValue(e.ShowErrorsInSummaryProperty,b===!0)},e.OnShowErrorsInSummaryChanged=function(b){var c=a.VisualTreeHelper.GetRoot(b);c&&e.UpdateDisplayedErrorsOnAllValidationSummaries(c)},e.prototype.OnFilterChanged=function(){this.UpdateDisplayedErrors()},e.prototype.OnHeaderChanged=function(){this.UpdateHeaderText()},e.prototype.OnTargetChanged=function(b,c){null!=this._RegisteredParent&&(this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this._RegisteredParent=null),b instanceof a.FrameworkElement&&b.BindingValidationError.off(this.Target_BindingValidationError,this),c instanceof a.FrameworkElement&&c.BindingValidationError.on(this.Target_BindingValidationError,this),this._Errors.ClearErrors(2),this.UpdateDisplayedErrors()},Object.defineProperty(e.prototype,"Errors",{get:function(){return this._Errors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DisplayedErrors",{get:function(){return new d(this._DisplayedErrors)},enumerable:!0,configurable:!0}),e.prototype.OnApplyTemplate=function(){c.prototype.OnApplyTemplate.call(this),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.off(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.off(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.SelectionChanged.off(this.ErrorsListBox_SelectionChanged,this)),this._ErrorsListBox=this.GetTemplateChild("SummaryListBox",b.ListBox),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.on(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.on(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.ItemsSource=this.DisplayedErrors,this._ErrorsListBox.SelectionChanged.on(this.ErrorsListBox_SelectionChanged,this)),this._HeaderContentControl=this.GetTemplateChild("HeaderContentControl",b.ContentControl),this.UpdateDisplayedErrors(),this.UpdateCommon(!1),this.UpdateValidation(!1)},e.prototype.Errors_CollectionChanged=function(a,b){if(null!=b.OldItems)for(var c=0,d=b.OldItems;c<d.length;c++){var f=d[c];f&&f.PropertyChanged.off(this.ValidationSummaryItem_PropertyChanged,this)}if(null!=b.NewItems)for(var c=0,d=b.NewItems;c<d.length;c++){var f=d[c];f&&f.PropertyChanged.on(this.ValidationSummaryItem_PropertyChanged,this)}this.SetCurrentValue(e.HasErrorsProperty,this._Errors.Count>0),this.UpdateDisplayedErrors()},e.prototype.ErrorsListBox_KeyDown=function(a,b){3===b.Key&&this.ExecuteClick(a)},e.prototype.ErrorsListBox_MouseLeftButtonUp=function(a){this.ExecuteClick(a)},e.prototype.ErrorsListBox_SelectionChanged=function(a,b){this.SelectionChanged.raise(this,b)},e.prototype.ValidationSummary_Loaded=function(){if(!this.Target&&!this._RegisteredParent){var b=a.VisualTreeHelper.GetParent(this);this._RegisteredParent=b instanceof a.FrameworkElement?b:null,null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.on(this.Target_BindingValidationError,this)}this.Loaded.off(this.ValidationSummary_Loaded,this)},e.prototype.ValidationSummary_Unloaded=function(){null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this.Unloaded.off(this.ValidationSummary_Unloaded,this)},e.prototype.ValidationSummary_IsEnabledChanged=function(){this.UpdateCommon(!0)},e.prototype.ValidationSummaryItem_PropertyChanged=function(a,b){"ItemType"===b.PropertyName&&this.UpdateDisplayedErrors()},e.prototype.UpdateValidation=function(b){var c=this,d=function(d){return a.Media.VSM.VisualStateManager.GoToState(c,d,b)};this._DisplayedErrors.Count>0?(this.SetCurrentValue(e.HasDisplayedErrorsProperty,!0),d("HasErrors")):(this.SetCurrentValue(e.HasDisplayedErrorsProperty,!1),d("Empty"))},e.prototype.UpdateCommon=function(b){var c=this,d=function(d){return a.Media.VSM.VisualStateManager.GoToState(c,d,b)};d(this.IsEnabled?"Normal":"Disabled")},e.prototype.UpdateHeaderText=function(){var a=this._HeaderContentControl;a&&(a.Content=null!=this.Header?this.Header:this.GetHeaderString())},e.prototype.UpdateDisplayedErrors=function(){for(var a=0!==(1&this.Filter),c=0!==(2&this.Filter),d=[],e=this.Errors.getEnumerator();e.moveNext();){var f=e.current;f&&(a&&1===f.ItemType?d.push(f):c&&2===f.ItemType&&d.push(f))}d.sort(b.compareSummaryItems),this._DisplayedErrors.Clear(),this._DisplayedErrors.AddRange(d),this.UpdateValidation(!0),this.UpdateHeaderText()},e.prototype.Target_BindingValidationError=function(c,d){var f=d.OriginalSource;if(d&&d.Error&&null!=d.Error.ErrorContent&&f instanceof a.FrameworkElement){var g=d.Error.ErrorContent.toString(),h=(f.Name||f._ID.toString())+g,i=this._ValidationSummaryItemDictionary;if(0===d.Action){if(e.GetShowErrorsInSummary(f)===!1)return;var j=d.Error.PropertyName,k=new b.ValidationSummaryItem(g,j,2,new b.ValidationSummaryItemSource(j,f),null);this._Errors.Add(k),i[h]=k}else 1===d.Action&&i[h]&&(this._Errors.Remove(i[h]),i[h]=void 0)}},e.prototype.GetHeaderString=function(){var a=this._DisplayedErrors.Count;return 1===a?"1 Error":a.toString()+" Errors"},e.prototype.ExecuteClick=function(a){var c=a;if(c instanceof b.ListBox){var d=c.SelectedItem;if(d instanceof b.ValidationSummaryItem&&this.FocusControlsOnClick){0===d.Sources.Count?this._CurSummItemsSource=null:e.FindMatchingErrorSource(d.Sources,this._CurSummItemsSource)<0&&(this._CurSummItemsSource=d.Sources.GetValueAt(0));var f=new b.FocusingInvalidControlEventArgs(d,this._CurSummItemsSource);if(this.FocusingInvalidControl.raise(this,f),f.Handled||null==f.Target||null==f.Target.Control||f.Target.Control.Focus(),!(d.Sources.Count<=0)){var g=e.FindMatchingErrorSource(d.Sources,f.Target),h=0>g?0:(g+1)%d.Sources.Count;this._CurSummItemsSource=d.Sources.GetValueAt(h)}}}},e.FindMatchingErrorSource=function(a,b){if(!a)return-1;for(var c=0;c<a.Count;c++)if(a.GetValueAt(c).Equals(b))return c;return-1},e.UpdateDisplayedErrorsOnAllValidationSummaries=function(b){if(b)if(b instanceof e)b.UpdateDisplayedErrors();else for(var c=0,d=a.VisualTreeHelper.GetChildrenCount(b);d>c;c++)e.UpdateDisplayedErrorsOnAllValidationSummaries(a.VisualTreeHelper.GetChild(b,c))},e.ShowErrorsInSummaryProperty=DependencyProperty.RegisterAttached("ShowErrorsInSummary",function(){return Boolean},e,!0,e.OnShowErrorsInSummaryChanged),e.ErrorStyleProperty=DependencyProperty.Register("ErrorStyle",function(){return a.Style},e),e.FilterProperty=DependencyProperty.Register("Filter",function(){return new a.Enum(b.ValidationSummaryFilters)},e,b.ValidationSummaryFilters.All,function(a,b){return a.OnFilterChanged(b.OldValue,b.NewValue)}),e.FocusControlsOnClickProperty=DependencyProperty.Register("FocusControlsOnClick",function(){return Boolean},e,!0),e.HasErrorsProperty=DependencyProperty.RegisterReadOnly("HasErrors",function(){return Boolean},e,!1),e.HasDisplayedErrorsProperty=DependencyProperty.RegisterReadOnly("HasDisplayedErrors",function(){return Boolean},e,!1),e.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},e,void 0,function(a,b){return a.OnHeaderChanged(b.OldValue,b.NewValue)}),e.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return a.DataTemplate},e),e.SummaryListBoxStyleProperty=DependencyProperty.Register("SummaryListBoxStyle",function(){return a.Style},e),e.TargetProperty=DependencyProperty.Register("Target",function(){return a.UIElement},e,void 0,function(a,b){return a.OnTargetChanged(b.OldValue,b.NewValue)}),e}(b.Control);b.ValidationSummary=e,b.TemplateVisualStates(e,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"HasErrors"},{GroupName:"ValidationStates",Name:"Empty"}),b.TemplateParts(e,{Name:"SummaryListBox",Type:b.ListBox});var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.ClearErrors=function(a){for(var b=[],c=this.getEnumerator();c.moveNext();)null!=c.current&&c.current.ItemType===a&&b.push(c.current);for(var d=0;d<b.length;d++)this.Remove(b[d])},b.prototype.ClearItems=function(){for(;this.Count>0;)this.RemoveAt(0)},b}(c)}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=a.Collections.ObservableCollection,d=function(a){function b(b,d,e,f,g){a.call(this),this.Message=b||null,this.MessageHeader=d||null,this.ItemType=e||1,this._Sources=new c,null!=f&&this._Sources.Add(f),this.Context=g}return __extends(b,a),Object.defineProperty(b.prototype,"Sources",{get:function(){return this._Sources},enumerable:!0,configurable:!0}),b}(a.MVVM.ObservableObject);b.ValidationSummaryItem=d,a.MVVM.NotifyProperties(d,["Message","MessageHeader","ItemType","Context"])}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b=function(){function a(a,b){Object.defineProperties(this,{PropertyName:{value:a,writable:!1},Control:{value:b||null,writable:!1}})}return a.prototype.Equals=function(b){if(!(b instanceof a))return!1;var c=b;return c.PropertyName===this.PropertyName&&c.Control===this.Control},a}();a.ValidationSummaryItemSource=b}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){function c(a,b){var c=d(a,b);if(null!=c)return c;var g=e(a.ItemType,b.ItemType);if(0!==g)return g;var h=a.Sources.Count>0?a.Sources.GetValueAt(0).Control:null,i=b.Sources.Count>0?b.Sources.GetValueAt(0).Control:null;return h!==i?(c=d(h,i),null!=c?c:(g=e(h.TabIndex,i.TabIndex),0!==g?g:f(h,i))):void 0}function d(a,b){return null==a?null==b?null:-1:null==b?1:null}function e(a,b){return a===b?0:b>a?-1:1}function f(b,c){if(!b||!c||b===c)return 0;var d=[],e=b;for(d.push(e);null!=(e=a.VisualTreeHelper.GetParent(e));)d.push(e);e=c;for(var f=e;null!=(e=a.VisualTreeHelper.GetParent(e));){var g=d.indexOf(e);if(0===g)return-1;if(!(0>g)){var h=d[g-1];if(!f||!h)return 0;for(var i=0,j=a.VisualTreeHelper.GetChildrenCount(e);j>i;i++){var k=a.VisualTreeHelper.GetChild(e,i);if(k===h)return 1;if(k===f)return-1}f=e}}return 0}b.compareSummaryItems=c}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.CreateLayoutUpdater=function(){return new b.wrappanel.WrapPanelUpdater},d.OrientationProperty=DependencyProperty.Register("Orientation",function(){return new a.Enum(a.Orientation)
},d,0),d.ItemWidthProperty=DependencyProperty.Register("ItemWidth",function(){return Number},d,0/0),d.ItemHeightProperty=DependencyProperty.Register("ItemHeight",function(){return Number},d,0/0),d}(a.Controls.Panel);b.WrapPanel=c;var d;!function(){a.UIReaction(c.OrientationProperty,function(a){return a.invalidateMeasure()},!1),a.UIReaction(c.ItemWidthProperty,function(a){return a.invalidateMeasure()},!1),a.UIReaction(c.ItemHeightProperty,function(a){return a.invalidateMeasure()},!1)}(d||(d={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.init=function(){this.setMeasurePipe(minerva.singleton(a.measure.WrapPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(a.arrange.WrapPanelArrangePipeDef));var c=this.assets;c.orientation=0,c.itemWidth=0/0,c.itemHeight=0/0,b.prototype.init.call(this)},c}(minerva.controls.panel.PanelUpdater);a.WrapPanelUpdater=b}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=minerva.controls.panel,c=function(b){function c(){b.call(this),this.addTapinAfter("doOverride","doHorizontal",a.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",a.tapins.doVertical).removeTapin("doOverride")}return __extends(c,b),c}(b.arrange.PanelArrangePipeDef);a.WrapPanelArrangePipeDef=c}(b=a.arrange||(a.arrange={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){function b(a,b,d,e){if(0!==a.orientation)return!0;var f=b.finalSize,g=b.arrangedSize;c.copyTo(f,g);var h=b.childRect;h.x=h.y=h.width=h.height=0;for(var i=0,j=e.walk();j.step();){var k=j.current,l=k.assets.desiredSize;f.width<h.x+l.width&&(h.x=0,h.y+=i,i=0),i=Math.max(i,l.height),c.copyTo(l,h),k.arrange(h),h.x+=l.width}return g.width=Math.max(g.width,f.width),!0}var c=minerva.Size;a.doHorizontal=b}(b=a.tapins||(a.tapins={}))}(b=a.arrange||(a.arrange={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){function b(a,b,d,e){if(1!==a.orientation)return!0;var f=b.finalSize,g=b.arrangedSize;c.copyTo(f,g);var h=b.childRect;h.x=h.y=h.width=h.height=0;for(var i=0,j=e.walk();j.step();){var k=j.current,l=k.assets.desiredSize;f.height<h.y+l.height&&(h.x+=i,h.y=0,i=0),i=Math.max(i,l.width),c.copyTo(l,h),k.arrange(h),h.y+=l.height}return g.height=Math.max(g.height,f.height),!0}var c=minerva.Size;a.doVertical=b}(b=a.tapins||(a.tapins={}))}(b=a.arrange||(a.arrange={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){function b(a,b,c){var d=a.getAttachedValue("$node"),e=d?d.XObject:null;e&&(isNaN(a.assets.width)&&!isNaN(b)&&(e.Width=b),isNaN(a.assets.height)&&!isNaN(c)&&(e.Height=c))}a.coerceChildSize=b}(b=a.helpers||(a.helpers={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(a){var b=minerva.controls.panel,c=function(b){function c(){b.call(this),this.addTapinAfter("doOverride","doHorizontal",a.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",a.tapins.doVertical).removeTapin("doOverride")}return __extends(c,b),c}(b.measure.PanelMeasurePipeDef);a.WrapPanelMeasurePipeDef=c}(b=a.measure||(a.measure={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,d,e){if(0!==b.orientation)return!0;var f=c.availableSize;isNaN(b.height)||(f.height=b.height),f.height=Math.min(f.height,b.maxHeight),f.height=Math.max(f.height,b.minHeight);var g=d.desiredSize;g.width=g.height=0;for(var h=0,i=0,j=0,k=e.walk();k.step();){var l=k.current;a.helpers.coerceChildSize(l,b.itemWidth,b.itemHeight),l.measure(f);var m=l.assets.desiredSize;f.width<i+m.width&&(i=0,j+=h,h=0),h=Math.max(h,m.height),g.height=Math.max(g.height,j+m.height),g.width=Math.max(g.width,i+m.width),i+=m.width}return!0}b.doHorizontal=c}(c=b.tapins||(b.tapins={}))}(b=a.measure||(a.measure={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(a){var b;!function(a){var b;!function(a){var b;!function(b){var c;!function(b){function c(b,c,d,e){if(1!==b.orientation)return!0;var f=c.availableSize;isNaN(b.width)||(f.width=b.width),f.width=Math.min(f.width,b.maxWidth),f.width=Math.max(f.width,b.minWidth);var g=d.desiredSize;g.width=g.height=0;for(var h=0,i=0,j=0,k=e.walk();k.step();){var l=k.current;a.helpers.coerceChildSize(l,b.itemWidth,b.itemHeight),l.measure(f);var m=l.assets.desiredSize;f.height<j+m.height&&(i+=h,j=0,h=0),h=Math.max(h,m.width),g.height=Math.max(g.height,j+m.height),g.width=Math.max(g.width,i+m.width),j+=m.height}return!0}b.doVertical=c}(c=b.tapins||(b.tapins={}))}(b=a.measure||(a.measure={}))}(b=a.wrappanel||(a.wrappanel={}))}(b=a.Controls||(a.Controls={}))}(Fayde||(Fayde={}));
//# sourceMappingURL=fayde.controls.min.map